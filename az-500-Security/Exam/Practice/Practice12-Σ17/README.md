# Practice12-Î£17

---

## Questions
|n|Question|Answer|
|-|--------|------|
|1|You have a web app named WebApp1<br/>You create a web application firewall (WAF) policy named WAF1<br/>You need to protect WebApp1 by using WAF1<br/>What should you do first?<br/><br/>a. Deploy an Azure Front Door<br/>b. Add an extension to WebApp1<br/>c. Deploy Azure Firewall|<details><summary>Answer</summary>a. Deploy an Azure Front Door<br/><br/>WAF is supported by Application Gateway & FrontDoor both</details>|
|2|You have an Azure subscription that contains an Azure SQL database named sql1<br/>You plan to audit sql1<br/>You need to configure the audit log destination. The solution must meet the following requirements:<br/>- Support querying events by using the kusto query language<br/>- Minimize administrative effort<br/>What should you configure?<br/><br/>a. an evnt hub<br/>b. a storage account<br/>c. a Log Analystics workspace|<details><summary>Answer</summary>c. a Log Analytics workspace<br/>ref:<br/>https://learn.microsoft.com/en-us/entra/identity/monitoring-health/tutorial-configure-log-analytics-workspace</details>|
|3|Case Study -<br/><br/>Overview -<br/>Contoso.com Ltd company that has a main office in Montreal & two branch offices in Seattle & New York<br/>The company hosts its entire server infrastructure in Azure<br/>Contoso has two Azure subscriptions named Sub1 & Sub2. Both subscriptions are associated to an AAD tenant named contoso.com<br/><br/>Existing env -<br/>AAD-<br/>Contoso.com contains the users shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>City&nbsp;</td> <td>Role&nbsp;</td> </tr> <tr> <td>User1&nbsp;</td> <td>Montreal&nbsp;</td> <td>Global adminsitrator&nbsp;</td> </tr> <tr> <td>User2&nbsp;</td> <td>MONTREAL&nbsp;</td> <td>Security administrator&nbsp;</td> </tr> <tr> <td>User3&nbsp;</td> <td>London&nbsp;</td> <td>Privileged role administrator&nbsp;</td> </tr> <tr> <td>User4&nbsp;</td> <td>Ontario&nbsp;</td> <td>Application administrator&nbsp;</td> </tr> <tr> <td>User5&nbsp;</td> <td>Seattle&nbsp;</td> <td>Cloud application administrator&nbsp;</td> </tr> <tr> <td>User6&nbsp;</td> <td>Seattle&nbsp;</td> <td>User administrator&nbsp;</td> </tr> <tr> <td>User7&nbsp;</td> <td>Sydney&nbsp;</td> <td>Reports reader&nbsp;</td> </tr> <tr> <td>User8&nbsp;</td> <td>Sydney&nbsp;</td> <td>None&nbsp;</td> </tr> <tr> <td>User9&nbsp;</td> <td>Sydney&nbsp;</td> <td>Owner&nbsp;</td> </tr> </tbody> </table><br/>Contoso.com contains the security groups shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Membership type&nbsp;</td> <td>Dynamic membership rule&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -contains "ON"&nbsp;</td> </tr> <tr> <td>Group2&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -match "*on"&nbsp;</td> </tr> </tbody> </table><br/>Sub1 -<br/>Sub1 contains six resource groups named RG1, RG2, RG3, RG4, RG5, & RG6<br/>User3 creates the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Resource group&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>RG1&nbsp;</td> </tr> <tr> <td>vnet2&nbsp;</td> <td>RG2&nbsp;</td> </tr> <tr> <td>vnet3&nbsp;</td> <td>RG3&nbsp;</td> </tr> <tr> <td>vnet4&nbsp;</td> <td>RG4&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the locks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Set on&nbsp;</td> <td>Lock type&nbsp;</td> </tr> <tr> <td>Lock1&nbsp;</td> <td>RG1&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock2&nbsp;</td> <td>RG2&nbsp;</td> <td>Read-only&nbsp;</td> </tr> <tr> <td>Lock3&nbsp;</td> <td>RG3&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock4&nbsp;</td> <td>RG3&nbsp;</td> <td>Read-only&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the Azure policies shown in the following table<br/><table> <tbody> <tr> <td>Policy&nbsp;definition&nbsp;</td> <td>Resource type&nbsp;</td> <td>Scope&nbsp;</td> </tr> <tr> <td>Allowed resource types&nbsp;</td> <td>virtualSecurityGroups&nbsp;</td> <td>RG4&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks/subnets&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>networkSecurityGroups&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowd resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks&eacute;virtualPeerings&nbsp;</td> <td>RG6&nbsp;</td> </tr> </tbody> </table><br/>Sub2 -<br/>Sub2 contains the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Subnet&nbsp;</td> </tr> <tr> <td>vnetwork1&nbsp;</td> <td>Subnet11, Subnet12, &amp; Subnet13&nbsp;</td> </tr> <tr> <td>vnetwork2&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>Sub2 contains the virtual machines shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td> <p>Network</p> <p>interface&nbsp;</p> </td> <td> <p>Application</p> <p>security group&nbsp;</p> </td> <td>Connected to&nbsp;</td> </tr> <tr> <td>VM1&nbsp;</td> <td>NIC1&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM2&nbsp;</td> <td>NIC2&nbsp;</td> <td>ASG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM3&nbsp;</td> <td>NIC3&nbsp;</td> <td>None&nbsp;</td> <td>Subnet12&nbsp;</td> </tr> <tr> <td>VM4&nbsp;</td> <td>NIC4&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>VM5&nbsp;</td> <td>NIC5&nbsp;</td> <td>None&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>All virtual machines have public IP addresses & the Web Server (IIS) role installed. The firewalls for eah virtual machine allow ping requests & web requests<br/>Sub2 contains the network secuirty groups (NSGs) shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Associated to&nbsp;</td> </tr> <tr> <td>NSG1&nbsp;</td> <td>NIC2&nbsp;</td> </tr> <tr> <td>NSG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>NSG3&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>NSG4&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>NSG1 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG2 has inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>80&nbsp;</td><td>TCP&nbsp;</td><td>Internet&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG3 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>TCP&nbsp;</td><td>ASG1&nbsp;</td><td>ASG1&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>150&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>ASG2&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>200&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG4 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG1, NSG2, NSG3, & NSG4 have the outbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Inernet&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/><br/>Contoso.com contains the security groups shown in the following table. Technical requirements -<br/>Contoso identifies the following technical requirements:<br/>Deploy Azure Firewall to vnetwork1 in Sub2<br/>Register an application named App2 in contoso.com<br/>Whenever possible, use the pinciple of least privilege.<br/>Enable AAD PIM for contoso.com<br/><br/>Questions<br/>You need to ensure the User2 can implement PIM<br/>What should you do first?<br/><br/>a. Assign User2 the Global administrator role<br/>b. Configure authentication methods for contoso.com<br/>c. Configure the identity secure score for contoso.com<br/>d. Enable MFA for User2|<details><summary>Answer</summary>a. Assign User2 the Global administrator role<br/><br/>To start using PIM in your directory, you must first enable PIM<br/>1. Sign in to the Azure portal as a Global Administrator of your directory<br/>You must be a Global Administrator with an organizational account (for example, @yourdomain.com), not a Microsoft account (for example, @outlook.com), to enable PIM for a directory<br/>Scenario. Technical requirements include. Enable AAD PIM for contoso.com<br/>ref:<br/>https://learn.microsoft.com/bs-latn-ba/entra/id-governance/privileged-identity-management/pim-getting-started</details>|
|4|
