# Practice12-Î£17

---

## Questions
|n|Question|Answer|
|-|--------|------|
|1|You have a web app named WebApp1<br/>You create a web application firewall (WAF) policy named WAF1<br/>You need to protect WebApp1 by using WAF1<br/>What should you do first?<br/><br/>a. Deploy an Azure Front Door<br/>b. Add an extension to WebApp1<br/>c. Deploy Azure Firewall|<details><summary>Answer</summary>a. Deploy an Azure Front Door<br/><br/>WAF is supported by Application Gateway & FrontDoor both</details>|
|2|You have an Azure subscription that contains an Azure SQL database named sql1<br/>You plan to audit sql1<br/>You need to configure the audit log destination. The solution must meet the following requirements:<br/>- Support querying events by using the kusto query language<br/>- Minimize administrative effort<br/>What should you configure?<br/><br/>a. an evnt hub<br/>b. a storage account<br/>c. a Log Analystics workspace|<details><summary>Answer</summary>c. a Log Analytics workspace<br/>ref:<br/>https://learn.microsoft.com/en-us/entra/identity/monitoring-health/tutorial-configure-log-analytics-workspace</details>|
|3|Case Study -<br/><br/>Overview -<br/>Contoso.com Ltd company that has a main office in Montreal & two branch offices in Seattle & New York<br/>The company hosts its entire server infrastructure in Azure<br/>Contoso has two Azure subscriptions named Sub1 & Sub2. Both subscriptions are associated to an AAD tenant named contoso.com<br/><br/>Existing env -<br/>AAD-<br/>Contoso.com contains the users shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>City&nbsp;</td> <td>Role&nbsp;</td> </tr> <tr> <td>User1&nbsp;</td> <td>Montreal&nbsp;</td> <td>Global adminsitrator&nbsp;</td> </tr> <tr> <td>User2&nbsp;</td> <td>MONTREAL&nbsp;</td> <td>Security administrator&nbsp;</td> </tr> <tr> <td>User3&nbsp;</td> <td>London&nbsp;</td> <td>Privileged role administrator&nbsp;</td> </tr> <tr> <td>User4&nbsp;</td> <td>Ontario&nbsp;</td> <td>Application administrator&nbsp;</td> </tr> <tr> <td>User5&nbsp;</td> <td>Seattle&nbsp;</td> <td>Cloud application administrator&nbsp;</td> </tr> <tr> <td>User6&nbsp;</td> <td>Seattle&nbsp;</td> <td>User administrator&nbsp;</td> </tr> <tr> <td>User7&nbsp;</td> <td>Sydney&nbsp;</td> <td>Reports reader&nbsp;</td> </tr> <tr> <td>User8&nbsp;</td> <td>Sydney&nbsp;</td> <td>None&nbsp;</td> </tr> <tr> <td>User9&nbsp;</td> <td>Sydney&nbsp;</td> <td>Owner&nbsp;</td> </tr> </tbody> </table><br/>Contoso.com contains the security groups shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Membership type&nbsp;</td> <td>Dynamic membership rule&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -contains "ON"&nbsp;</td> </tr> <tr> <td>Group2&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -match "*on"&nbsp;</td> </tr> </tbody> </table><br/>Sub1 -<br/>Sub1 contains six resource groups named RG1, RG2, RG3, RG4, RG5, & RG6<br/>User3 creates the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Resource group&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>RG1&nbsp;</td> </tr> <tr> <td>vnet2&nbsp;</td> <td>RG2&nbsp;</td> </tr> <tr> <td>vnet3&nbsp;</td> <td>RG3&nbsp;</td> </tr> <tr> <td>vnet4&nbsp;</td> <td>RG4&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the locks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Set on&nbsp;</td> <td>Lock type&nbsp;</td> </tr> <tr> <td>Lock1&nbsp;</td> <td>RG1&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock2&nbsp;</td> <td>RG2&nbsp;</td> <td>Read-only&nbsp;</td> </tr> <tr> <td>Lock3&nbsp;</td> <td>RG3&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock4&nbsp;</td> <td>RG3&nbsp;</td> <td>Read-only&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the Azure policies shown in the following table<br/><table> <tbody> <tr> <td>Policy&nbsp;definition&nbsp;</td> <td>Resource type&nbsp;</td> <td>Scope&nbsp;</td> </tr> <tr> <td>Allowed resource types&nbsp;</td> <td>virtualSecurityGroups&nbsp;</td> <td>RG4&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks/subnets&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>networkSecurityGroups&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowd resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks&eacute;virtualPeerings&nbsp;</td> <td>RG6&nbsp;</td> </tr> </tbody> </table><br/>Sub2 -<br/>Sub2 contains the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Subnet&nbsp;</td> </tr> <tr> <td>vnetwork1&nbsp;</td> <td>Subnet11, Subnet12, &amp; Subnet13&nbsp;</td> </tr> <tr> <td>vnetwork2&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>Sub2 contains the virtual machines shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td> <p>Network</p> <p>interface&nbsp;</p> </td> <td> <p>Application</p> <p>security group&nbsp;</p> </td> <td>Connected to&nbsp;</td> </tr> <tr> <td>VM1&nbsp;</td> <td>NIC1&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM2&nbsp;</td> <td>NIC2&nbsp;</td> <td>ASG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM3&nbsp;</td> <td>NIC3&nbsp;</td> <td>None&nbsp;</td> <td>Subnet12&nbsp;</td> </tr> <tr> <td>VM4&nbsp;</td> <td>NIC4&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>VM5&nbsp;</td> <td>NIC5&nbsp;</td> <td>None&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>All virtual machines have public IP addresses & the Web Server (IIS) role installed. The firewalls for eah virtual machine allow ping requests & web requests<br/>Sub2 contains the network secuirty groups (NSGs) shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Associated to&nbsp;</td> </tr> <tr> <td>NSG1&nbsp;</td> <td>NIC2&nbsp;</td> </tr> <tr> <td>NSG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>NSG3&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>NSG4&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>NSG1 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG2 has inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>80&nbsp;</td><td>TCP&nbsp;</td><td>Internet&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG3 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>TCP&nbsp;</td><td>ASG1&nbsp;</td><td>ASG1&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>150&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>ASG2&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>200&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG4 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG1, NSG2, NSG3, & NSG4 have the outbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Inernet&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/><br/>Contoso.com contains the security groups shown in the following table. Technical requirements -<br/>Contoso identifies the following technical requirements:<br/>Deploy Azure Firewall to vnetwork1 in Sub2<br/>Register an application named App2 in contoso.com<br/>Whenever possible, use the pinciple of least privilege.<br/>Enable AAD PIM for contoso.com<br/><br/>Questions<br/>You need to ensure the User2 can implement PIM<br/>What should you do first?<br/><br/>a. Assign User2 the Global administrator role<br/>b. Configure authentication methods for contoso.com<br/>c. Configure the identity secure score for contoso.com<br/>d. Enable MFA for User2|<details><summary>Answer</summary>a. Assign User2 the Global administrator role<br/><br/>To start using PIM in your directory, you must first enable PIM<br/>1. Sign in to the Azure portal as a Global Administrator of your directory<br/>You must be a Global Administrator with an organizational account (for example, @yourdomain.com), not a Microsoft account (for example, @outlook.com), to enable PIM for a directory<br/>Scenario. Technical requirements include. Enable AAD PIM for contoso.com<br/>ref:<br/>https://learn.microsoft.com/bs-latn-ba/entra/id-governance/privileged-identity-management/pim-getting-started</details>|
|4|Start the case study -<br/><br/>Overview -<br/>Litware, Inc. is a digital media company that has 500 employees in the Chicago are & 20 employees in the San Francisco are<br/><br/>Existing Env -<br/>Litware has an Azure subscription named Sub1 that has a subscription ID of 43894a43-17c2-4a39-8cfc-3540c2653ef4<br/>Sub1 is associated to an AAD tename named litwareinc.com. The tenant contains the user objects & the device objects of all the Litware employees & their devices. Each user is assigned an AAD Premium P2 license. AAD PIM is activated<br/>The tenant contains the groups shown in the folowing table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Security group&nbsp;</td> <td> <p>A group that has the Dynamic User membership type,</p> <p>contains all the San Francisco users, &amp; provides</p> <p>access to many AAD applications &amp; Azure resources&nbsp;</p> </td> </tr> <tr> <td>Group2&nbsp;</td> <td>&nbsp;Security grou</td> <td> <p>A group that has the Dynamic User membership type &amp;</p> <p>contains the Chicago IT team&nbsp;</p> </td> </tr> </tbody> </table><br/>The Azure subscription contains the objects shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>Virtual network&nbsp;</td> <td> <p>vnet1 is a virtual network that contains</p> <p>security sensitive IT resources. Vnet1</p> <p>contains three subnets named Subnet0,</p> <p>Subnet1, &amp; AzureFirewallSubnet&nbsp;</p> </td> </tr> <tr> <td>VM0&nbsp;</td> <td>Virtual machine&nbsp;</td> <td> <p>VM0 is an Azure virtual machine that runs</p> <p>Windows Server 2016, connects to</p> <p>Subnet0, &amp; has just in time (JIT) VM</p> <p>access configured&nbsp;</p> </td> </tr> <tr> <td>VM1&nbsp;</td> <td>Virtual machine&nbsp;</td> <td> <p>VM1 is an Azure virtual machine that runs</p> <p>Windows Server 2016 &amp; connects to</p> <p>subnet0&nbsp;</p> </td> </tr> <tr> <td>SQLDB1&nbsp;</td> <td> <p>Azure SQL</p> <p>Database&nbsp;</p> </td> <td> <p>SQLDB1 is an Azure SQL database on a</p> <p>SQL Database server named</p> <p>LitwareSQLServer1&nbsp;</p> </td> </tr> <tr> <td>WebApp1&nbsp;</td> <td>Web app&nbsp;</td> <td> <p>WebApp1 is an Azure web app that is</p> <p>accessible by using https://litwareinc.com</p> <p>&amp; http://litwareinc.com&nbsp;</p> </td> </tr> <tr> <td>RG1&nbsp;</td> <td>Resource group&nbsp;</td> <td> <p>RG1 is a resource group that</p> <p>contains vnet1, VM0, &amp; VM1&nbsp;</p> </td> </tr> <tr> <td>RG2&nbsp;</td> <td>Resource group&nbsp;</td> <td> <p>RG2 is a resource group that</p> <p>contains shared IT resources&nbsp;</p> </td> </tr> </tbody> </table><br/>Identity & Access Requirements<br/>Azure Security Center is set to the Standard tier<br/>Requirements -<br/>Planned Changes -<br/>Litware plans to deploy the Azure resources shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>Firewall1&nbsp;</td> <td>Azure Firewall&nbsp;</td> <td>An Azure firwall on vnet1&nbsp;</td> </tr> <tr> <td>RT1&nbsp;</td> <td>Route table&nbsp;</td> <td> <p>A route table that will contain a route</p> <p>pointing to Firewall1 as the default</p> <p>gateway &amp; will be assigned to Subnet0&nbsp;</p> </td> </tr> <tr> <td>AKS1&nbsp;</td> <td>AKS&nbsp;</td> <td>A managed AKS cluster&nbsp;</td> </tr> </tbody> </table>Litware identifies the following identity & access requirements:<br/>All San Francisco users & their devices must be members of Group1<br/>The members of Group2 must be assigned the Contributor role to RG2 by using a permanent eligible assignment<br/>Users must be prevented from registering applications in AAD & from consenting to applications that access company information on the user? behalf<br/>Platform Protection Requirements<br/>Litware identifies the following platform protection requirements:<br/>Microsoft Antimalware must be installed on the virtual machines in RG1<br/>The members of Group2 must be assigned the AKS Cluster Admin Role<br/>AAD users must be able to authenticate to AKS1 by using their AAD credentials<br/>Following the implementation of the planned changes, the IT team must be able to connect to VM0 by using JIT VM access<br/>A new custom RBAC role named Role1 must be used to delegate the administration of the managed disks in RG1. Role1 must be available only for RG1<br/>Security Operations Requirements<br/>Litware must be able to customize the operating system security configurations in Azure Security Center<br/>Data & Application Requirements<br/>Litware identifies the following data & applications requirements:<br/>The users in Group2 must be able to authenticate to SQLDB1 by using their AAD credentials<br/>WebApp1 must enforce mutual authentication<br/><br/>General Requirements -<br/>Litware identifies the following general requirements:<br/>Whenever possible, administrative effort must be minimized<br/>Whenever possible, use of automation must be maximized<br/><br/>Question<br/>You need to deploy AKS1 to meet the platform protection requirements<br/>Which four actions should you perform in sequence? To anwser, move the appropriate actions from the list of actions to the answer area & arrange them in the correct order<br/>Note : More than once order of answer choices is correct. You will recieve credit for any of the correct orders you select<br/><table> <tbody> <tr> <td>Actions&nbsp;</td> <td>Answer Area&nbsp;</td> </tr> <tr> <td>Deploy in AKS cluster&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>Create a client application&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>Create a server application&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>Create an RBAC binding&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>Create a custom RBAC role&nbsp;</td> <td>&nbsp;</td> </tr> </tbody> </table>|<details><summary>Answer</summary>1. Create a sever application<br/>2. Create a client application<br/>3. Deploy an AKS cluster<br/>4. Create an RBAC binding<br/><br/>Scenario : AAD users must be able to authenticate to AKS1 by using their AAD credentials<br/>Litware plan to deploy AKS1, which is a managed AKS cluster<br/><br/>**Step 1:** create a server application<br/>To prive AAD authentication for an AKS cluster, two AAD applications are created. The first application is a server conponent that provides user authentication<br/><br/>**Step 2:** Creat a client app<br/>The second app is a client component that's used when you're prompted by the CLI for authentication. This client app uses the server app for the actual authentication of the credentails provided by the client<br/><br/>**Step 3:** Deploy an AKS cluster<br/>Use the az group create command to create a resource group for the AKS cluster<br/>Use the az aks create command to deploy the AKS cluster<br/><br/>**Step 4:** create an RBAC binding<br/>Before you use an AAD account with an AKS clsuter, you must create role-binding or cluster role-binding. Roles define ther permissions to grant, & bindings apply them to desired users. These assignements can be applied to a given namespace, or across the entire cluster<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/aks/azure-ad-integration-cli</details>|
|5|Start the case study -<br/><br/>Overview -<br/>Litware, Inc. is a digital media company that has 500 employees in the Chicago are & 20 employees in the San Francisco are<br/><br/>Existing Env -<br/>Litware has an Azure subscription named Sub1 that has a subscription ID of 43894a43-17c2-4a39-8cfc-3540c2653ef4<br/>Sub1 is associated to an AAD tename named litwareinc.com. The tenant contains the user objects & the device objects of all the Litware employees & their devices. Each user is assigned an AAD Premium P2 license. AAD PIM is activated<br/>The tenant contains the groups shown in the folowing table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Security group&nbsp;</td> <td> <p>A group that has the Dynamic User membership type,</p> <p>contains all the San Francisco users, &amp; provides</p> <p>access to many AAD applications &amp; Azure resources&nbsp;</p> </td> </tr> <tr> <td>Group2&nbsp;</td> <td>&nbsp;Security grou</td> <td> <p>A group that has the Dynamic User membership type &amp;</p> <p>contains the Chicago IT team&nbsp;</p> </td> </tr> </tbody> </table><br/>The Azure subscription contains the objects shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>Virtual network&nbsp;</td> <td> <p>vnet1 is a virtual network that contains</p> <p>security sensitive IT resources. Vnet1</p> <p>contains three subnets named Subnet0,</p> <p>Subnet1, &amp; AzureFirewallSubnet&nbsp;</p> </td> </tr> <tr> <td>VM0&nbsp;</td> <td>Virtual machine&nbsp;</td> <td> <p>VM0 is an Azure virtual machine that runs</p> <p>Windows Server 2016, connects to</p> <p>Subnet0, &amp; has just in time (JIT) VM</p> <p>access configured&nbsp;</p> </td> </tr> <tr> <td>VM1&nbsp;</td> <td>Virtual machine&nbsp;</td> <td> <p>VM1 is an Azure virtual machine that runs</p> <p>Windows Server 2016 &amp; connects to</p> <p>subnet0&nbsp;</p> </td> </tr> <tr> <td>SQLDB1&nbsp;</td> <td> <p>Azure SQL</p> <p>Database&nbsp;</p> </td> <td> <p>SQLDB1 is an Azure SQL database on a</p> <p>SQL Database server named</p> <p>LitwareSQLServer1&nbsp;</p> </td> </tr> <tr> <td>WebApp1&nbsp;</td> <td>Web app&nbsp;</td> <td> <p>WebApp1 is an Azure web app that is</p> <p>accessible by using https://litwareinc.com</p> <p>&amp; http://litwareinc.com&nbsp;</p> </td> </tr> <tr> <td>RG1&nbsp;</td> <td>Resource group&nbsp;</td> <td> <p>RG1 is a resource group that</p> <p>contains vnet1, VM0, &amp; VM1&nbsp;</p> </td> </tr> <tr> <td>RG2&nbsp;</td> <td>Resource group&nbsp;</td> <td> <p>RG2 is a resource group that</p> <p>contains shared IT resources&nbsp;</p> </td> </tr> </tbody> </table><br/>Identity & Access Requirements<br/>Azure Security Center is set to the Standard tier<br/>Requirements -<br/>Planned Changes -<br/>Litware plans to deploy the Azure resources shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>Firewall1&nbsp;</td> <td>Azure Firewall&nbsp;</td> <td>An Azure firwall on vnet1&nbsp;</td> </tr> <tr> <td>RT1&nbsp;</td> <td>Route table&nbsp;</td> <td> <p>A route table that will contain a route</p> <p>pointing to Firewall1 as the default</p> <p>gateway &amp; will be assigned to Subnet0&nbsp;</p> </td> </tr> <tr> <td>AKS1&nbsp;</td> <td>AKS&nbsp;</td> <td>A managed AKS cluster&nbsp;</td> </tr> </tbody> </table>Litware identifies the following identity & access requirements:<br/>All San Francisco users & their devices must be members of Group1<br/>The members of Group2 must be assigned the Contributor role to RG2 by using a permanent eligible assignment<br/>Users must be prevented from registering applications in AAD & from consenting to applications that access company information on the user? behalf<br/>Platform Protection Requirements<br/>Litware identifies the following platform protection requirements:<br/>Microsoft Antimalware must be installed on the virtual machines in RG1<br/>The members of Group2 must be assigned the AKS Cluster Admin Role<br/>AAD users must be able to authenticate to AKS1 by using their AAD credentials<br/>Following the implementation of the planned changes, the IT team must be able to connect to VM0 by using JIT VM access<br/>A new custom RBAC role named Role1 must be used to delegate the administration of the managed disks in RG1. Role1 must be available only for RG1<br/>Security Operations Requirements<br/>Litware must be able to customize the operating system security configurations in Azure Security Center<br/>Data & Application Requirements<br/>Litware identifies the following data & applications requirements:<br/>The users in Group2 must be able to authenticate to SQLDB1 by using their AAD credentials<br/>WebApp1 must enforce mutual authentication<br/><br/>General Requirements -<br/>Litware identifies the following general requirements:<br/>Whenever possible, administrative effort must be minimized<br/>Whenever possible, use of automation must be maximized<br/><br/>Question<br/>You need to ensure that users can access VM0. The solution must meet the platform protection requirements<br/>What should you do?<br/><br/>a. Move VM0 to Subnet1<br/>b. On Firewall, confiugre a network traffic filtering rule<br/>c. Assign RT1 to AzureFirewallSubnet<br/>d. On Firewall, configure a DNAT rule|<details><summary>Answer</summary>a. Move VM0 to Subnet1<br/><br/>Azure Firewall has the following know issue:<br/>Conflict with Azure Security Center (ASC) Just-in-Time (JIT) feature<br/>If a virtual machine is accessed using JIT, & is in a subnet with a suer-defined route that points to Azure Firwall as a default gateway, ASC JIT doesn't work<br/>This is a result of asymmetric routing - a packet comes in via the virtual machine public IP (JIT opened the accees), but the return path is via the firewall, which drops the packet because there is no established session on the firewall<br/><br/>**Solution** To work around this issue, place the JIT virtual machines on a separate subnet that doesn't have a user-defined route to the firewall<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/firewall/overview</details>|
|6|Start the case study -<br/><br/>Overview -<br/>Litware, Inc. is a digital media company that has 500 employees in the Chicago are & 20 employees in the San Francisco are<br/><br/>Existing Env -<br/>Litware has an Azure subscription named Sub1 that has a subscription ID of 43894a43-17c2-4a39-8cfc-3540c2653ef4<br/>Sub1 is associated to an AAD tename named litwareinc.com. The tenant contains the user objects & the device objects of all the Litware employees & their devices. Each user is assigned an AAD Premium P2 license. AAD PIM is activated<br/>The tenant contains the groups shown in the folowing table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Security group&nbsp;</td> <td> <p>A group that has the Dynamic User membership type,</p> <p>contains all the San Francisco users, &amp; provides</p> <p>access to many AAD applications &amp; Azure resources&nbsp;</p> </td> </tr> <tr> <td>Group2&nbsp;</td> <td>&nbsp;Security grou</td> <td> <p>A group that has the Dynamic User membership type &amp;</p> <p>contains the Chicago IT team&nbsp;</p> </td> </tr> </tbody> </table><br/>The Azure subscription contains the objects shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>Virtual network&nbsp;</td> <td> <p>vnet1 is a virtual network that contains</p> <p>security sensitive IT resources. Vnet1</p> <p>contains three subnets named Subnet0,</p> <p>Subnet1, &amp; AzureFirewallSubnet&nbsp;</p> </td> </tr> <tr> <td>VM0&nbsp;</td> <td>Virtual machine&nbsp;</td> <td> <p>VM0 is an Azure virtual machine that runs</p> <p>Windows Server 2016, connects to</p> <p>Subnet0, &amp; has just in time (JIT) VM</p> <p>access configured&nbsp;</p> </td> </tr> <tr> <td>VM1&nbsp;</td> <td>Virtual machine&nbsp;</td> <td> <p>VM1 is an Azure virtual machine that runs</p> <p>Windows Server 2016 &amp; connects to</p> <p>subnet0&nbsp;</p> </td> </tr> <tr> <td>SQLDB1&nbsp;</td> <td> <p>Azure SQL</p> <p>Database&nbsp;</p> </td> <td> <p>SQLDB1 is an Azure SQL database on a</p> <p>SQL Database server named</p> <p>LitwareSQLServer1&nbsp;</p> </td> </tr> <tr> <td>WebApp1&nbsp;</td> <td>Web app&nbsp;</td> <td> <p>WebApp1 is an Azure web app that is</p> <p>accessible by using https://litwareinc.com</p> <p>&amp; http://litwareinc.com&nbsp;</p> </td> </tr> <tr> <td>RG1&nbsp;</td> <td>Resource group&nbsp;</td> <td> <p>RG1 is a resource group that</p> <p>contains vnet1, VM0, &amp; VM1&nbsp;</p> </td> </tr> <tr> <td>RG2&nbsp;</td> <td>Resource group&nbsp;</td> <td> <p>RG2 is a resource group that</p> <p>contains shared IT resources&nbsp;</p> </td> </tr> </tbody> </table><br/>Identity & Access Requirements<br/>Azure Security Center is set to the Standard tier<br/>Requirements -<br/>Planned Changes -<br/>Litware plans to deploy the Azure resources shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>Firewall1&nbsp;</td> <td>Azure Firewall&nbsp;</td> <td>An Azure firwall on vnet1&nbsp;</td> </tr> <tr> <td>RT1&nbsp;</td> <td>Route table&nbsp;</td> <td> <p>A route table that will contain a route</p> <p>pointing to Firewall1 as the default</p> <p>gateway &amp; will be assigned to Subnet0&nbsp;</p> </td> </tr> <tr> <td>AKS1&nbsp;</td> <td>AKS&nbsp;</td> <td>A managed AKS cluster&nbsp;</td> </tr> </tbody> </table>Litware identifies the following identity & access requirements:<br/>All San Francisco users & their devices must be members of Group1<br/>The members of Group2 must be assigned the Contributor role to RG2 by using a permanent eligible assignment<br/>Users must be prevented from registering applications in AAD & from consenting to applications that access company information on the user? behalf<br/>Platform Protection Requirements<br/>Litware identifies the following platform protection requirements:<br/>Microsoft Antimalware must be installed on the virtual machines in RG1<br/>The members of Group2 must be assigned the AKS Cluster Admin Role<br/>AAD users must be able to authenticate to AKS1 by using their AAD credentials<br/>Following the implementation of the planned changes, the IT team must be able to connect to VM0 by using JIT VM access<br/>A new custom RBAC role named Role1 must be used to delegate the administration of the managed disks in RG1. Role1 must be available only for RG1<br/>Security Operations Requirements<br/>Litware must be able to customize the operating system security configurations in Azure Security Center<br/>Data & Application Requirements<br/>Litware identifies the following data & applications requirements:<br/>The users in Group2 must be able to authenticate to SQLDB1 by using their AAD credentials<br/>WebApp1 must enforce mutual authentication<br/><br/>General Requirements -<br/>Litware identifies the following general requirements:<br/>Whenever possible, administrative effort must be minimized<br/>Whenever possible, use of automation must be maximized<br/><br/>Question<br/>You need to deploy Microsoft Antimalware to meet the platform protection requirements<br/>What should you do? To answer, select the appropriate options in the answer area<br/>Note : Each correct selection is worth one point<br/><table> <tbody> <tr> <td>Create a custom policy definition that has effect set to :&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Append&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Deny&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>DeployIfNotExists&nbsp;</td> </tr> </tbody> </table><br/><table> <tbody> <tr> <td>Create a policy assignemnt &amp; modify :&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>The Create a Managed Identity setting&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>The exclusion settings&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>The scope&nbsp;</td> </tr> </tbody> </table>|<details><summary>Answer</summary>**Scenario:**<br/>Microsoft Antimalware must be installed on the virtual machines in RG1<br/>RG1 is a resource group that contains vnet1, VM0, & VM1<br/><br/>**Box 1 - DeployIfNotExists**<br/>DeployIfNotExists executes a template deployment when the condition is met<br/>Azure policy definition Antimalware<br/><br/>**Incorrect Answers:**<br/>Append:<br/>Append is used to add additional fileds to the requested resource during creation or update. A common example is adding tags on resources such as costCenter or specifying allowd IPs for a storage resource<br/><br/>Deny:<br/>Deny is used to prevent a resource request that doesn't match defined standards through a policy definition & fails the request<br/><br/>**Box 2 - The create a managed Identity setting**<br/>Whe Azure policy runs the template in the deployIfNotExists policy definition, it does so using a managed idenity. Azure Policy create a managed identity for each assignment, but must have details about what roles to grant the managed idenity<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/governance/policy/concepts/effects</details>|
|7|Case Study -<br/><br/>Overview -<br/>Contoso.com Ltd company that has a main office in Montreal & two branch offices in Seattle & New York<br/>The company hosts its entire server infrastructure in Azure<br/>Contoso has two Azure subscriptions named Sub1 & Sub2. Both subscriptions are associated to an AAD tenant named contoso.com<br/><br/>Existing env -<br/>AAD-<br/>Contoso.com contains the users shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>City&nbsp;</td> <td>Role&nbsp;</td> </tr> <tr> <td>User1&nbsp;</td> <td>Montreal&nbsp;</td> <td>Global adminsitrator&nbsp;</td> </tr> <tr> <td>User2&nbsp;</td> <td>MONTREAL&nbsp;</td> <td>Security administrator&nbsp;</td> </tr> <tr> <td>User3&nbsp;</td> <td>London&nbsp;</td> <td>Privileged role administrator&nbsp;</td> </tr> <tr> <td>User4&nbsp;</td> <td>Ontario&nbsp;</td> <td>Application administrator&nbsp;</td> </tr> <tr> <td>User5&nbsp;</td> <td>Seattle&nbsp;</td> <td>Cloud application administrator&nbsp;</td> </tr> <tr> <td>User6&nbsp;</td> <td>Seattle&nbsp;</td> <td>User administrator&nbsp;</td> </tr> <tr> <td>User7&nbsp;</td> <td>Sydney&nbsp;</td> <td>Reports reader&nbsp;</td> </tr> <tr> <td>User8&nbsp;</td> <td>Sydney&nbsp;</td> <td>None&nbsp;</td> </tr> <tr> <td>User9&nbsp;</td> <td>Sydney&nbsp;</td> <td>Owner&nbsp;</td> </tr> </tbody> </table><br/>Contoso.com contains the security groups shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Membership type&nbsp;</td> <td>Dynamic membership rule&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -contains "ON"&nbsp;</td> </tr> <tr> <td>Group2&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -match "*on"&nbsp;</td> </tr> </tbody> </table><br/>Sub1 -<br/>Sub1 contains six resource groups named RG1, RG2, RG3, RG4, RG5, & RG6<br/>User3 creates the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Resource group&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>RG1&nbsp;</td> </tr> <tr> <td>vnet2&nbsp;</td> <td>RG2&nbsp;</td> </tr> <tr> <td>vnet3&nbsp;</td> <td>RG3&nbsp;</td> </tr> <tr> <td>vnet4&nbsp;</td> <td>RG4&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the locks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Set on&nbsp;</td> <td>Lock type&nbsp;</td> </tr> <tr> <td>Lock1&nbsp;</td> <td>RG1&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock2&nbsp;</td> <td>RG2&nbsp;</td> <td>Read-only&nbsp;</td> </tr> <tr> <td>Lock3&nbsp;</td> <td>RG3&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock4&nbsp;</td> <td>RG3&nbsp;</td> <td>Read-only&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the Azure policies shown in the following table<br/><table> <tbody> <tr> <td>Policy&nbsp;definition&nbsp;</td> <td>Resource type&nbsp;</td> <td>Scope&nbsp;</td> </tr> <tr> <td>Allowed resource types&nbsp;</td> <td>virtualSecurityGroups&nbsp;</td> <td>RG4&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks/subnets&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>networkSecurityGroups&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowd resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks&eacute;virtualPeerings&nbsp;</td> <td>RG6&nbsp;</td> </tr> </tbody> </table><br/>Sub2 -<br/>Sub2 contains the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Subnet&nbsp;</td> </tr> <tr> <td>vnetwork1&nbsp;</td> <td>Subnet11, Subnet12, &amp; Subnet13&nbsp;</td> </tr> <tr> <td>vnetwork2&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>Sub2 contains the virtual machines shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td> <p>Network</p> <p>interface&nbsp;</p> </td> <td> <p>Application</p> <p>security group&nbsp;</p> </td> <td>Connected to&nbsp;</td> </tr> <tr> <td>VM1&nbsp;</td> <td>NIC1&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM2&nbsp;</td> <td>NIC2&nbsp;</td> <td>ASG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM3&nbsp;</td> <td>NIC3&nbsp;</td> <td>None&nbsp;</td> <td>Subnet12&nbsp;</td> </tr> <tr> <td>VM4&nbsp;</td> <td>NIC4&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>VM5&nbsp;</td> <td>NIC5&nbsp;</td> <td>None&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>All virtual machines have public IP addresses & the Web Server (IIS) role installed. The firewalls for eah virtual machine allow ping requests & web requests<br/>Sub2 contains the network secuirty groups (NSGs) shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Associated to&nbsp;</td> </tr> <tr> <td>NSG1&nbsp;</td> <td>NIC2&nbsp;</td> </tr> <tr> <td>NSG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>NSG3&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>NSG4&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>NSG1 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG2 has inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>80&nbsp;</td><td>TCP&nbsp;</td><td>Internet&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG3 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>TCP&nbsp;</td><td>ASG1&nbsp;</td><td>ASG1&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>150&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>ASG2&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>200&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG4 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG1, NSG2, NSG3, & NSG4 have the outbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Inernet&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/><br/>Contoso.com contains the security groups shown in the following table. Technical requirements -<br/>Contoso identifies the following technical requirements:<br/>Deploy Azure Firewall to vnetwork1 in Sub2<br/>Register an application named App2 in contoso.com<br/>Whenever possible, use the pinciple of least privilege.<br/>Enable AAD PIM for contoso.com<br/><br/>Question<br/>What is teh membership of Group1 & Group2? to answer, select the appropriate options in the aswer area<br/>Note : Each correct selection is worth one point<br/><table> <tbody> <tr> <td>Group1 :&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>No members&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Only User2&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Only User2 &amp; User4&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>User1, User2, User3, &amp; User4&nbsp;</td> </tr> </tbody> </table><br/><table> <tbody> <tr> <td>Group2 :&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>No members&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Only User3&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Only User1 &amp; User3&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>User1, User2, User3, &amp; User4&nbsp;</td> </tr> </tbody> </table>|<details><summary>Answer</summary>**Box 1 - User1, User2, User3, User4**<br/>Contains "ON" is true for Montreal (User1), MONTREAL (User2), London (User3), & Ontario (User4) as string & regex operations are not case sensitive<br/><br/>**Box 2- Only user 3**<br/>Match "*on" is on true for London (User3) as 'Londo' is the only word that ends with 'on'<br/>ref:<br/>https://learn.microsoft.com/en-us/entra/identity/users/groups-dynamic-membership</details>|
|8|Case Study -<br/><br/>Overview -<br/>Contoso.com Ltd company that has a main office in Montreal & two branch offices in Seattle & New York<br/>The company hosts its entire server infrastructure in Azure<br/>Contoso has two Azure subscriptions named Sub1 & Sub2. Both subscriptions are associated to an AAD tenant named contoso.com<br/><br/>Existing env -<br/>AAD-<br/>Contoso.com contains the users shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>City&nbsp;</td> <td>Role&nbsp;</td> </tr> <tr> <td>User1&nbsp;</td> <td>Montreal&nbsp;</td> <td>Global adminsitrator&nbsp;</td> </tr> <tr> <td>User2&nbsp;</td> <td>MONTREAL&nbsp;</td> <td>Security administrator&nbsp;</td> </tr> <tr> <td>User3&nbsp;</td> <td>London&nbsp;</td> <td>Privileged role administrator&nbsp;</td> </tr> <tr> <td>User4&nbsp;</td> <td>Ontario&nbsp;</td> <td>Application administrator&nbsp;</td> </tr> <tr> <td>User5&nbsp;</td> <td>Seattle&nbsp;</td> <td>Cloud application administrator&nbsp;</td> </tr> <tr> <td>User6&nbsp;</td> <td>Seattle&nbsp;</td> <td>User administrator&nbsp;</td> </tr> <tr> <td>User7&nbsp;</td> <td>Sydney&nbsp;</td> <td>Reports reader&nbsp;</td> </tr> <tr> <td>User8&nbsp;</td> <td>Sydney&nbsp;</td> <td>None&nbsp;</td> </tr> <tr> <td>User9&nbsp;</td> <td>Sydney&nbsp;</td> <td>Owner&nbsp;</td> </tr> </tbody> </table><br/>Contoso.com contains the security groups shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Membership type&nbsp;</td> <td>Dynamic membership rule&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -contains "ON"&nbsp;</td> </tr> <tr> <td>Group2&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -match "*on"&nbsp;</td> </tr> </tbody> </table><br/>Sub1 -<br/>Sub1 contains six resource groups named RG1, RG2, RG3, RG4, RG5, & RG6<br/>User3 creates the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Resource group&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>RG1&nbsp;</td> </tr> <tr> <td>vnet2&nbsp;</td> <td>RG2&nbsp;</td> </tr> <tr> <td>vnet3&nbsp;</td> <td>RG3&nbsp;</td> </tr> <tr> <td>vnet4&nbsp;</td> <td>RG4&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the locks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Set on&nbsp;</td> <td>Lock type&nbsp;</td> </tr> <tr> <td>Lock1&nbsp;</td> <td>RG1&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock2&nbsp;</td> <td>RG2&nbsp;</td> <td>Read-only&nbsp;</td> </tr> <tr> <td>Lock3&nbsp;</td> <td>RG3&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock4&nbsp;</td> <td>RG3&nbsp;</td> <td>Read-only&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the Azure policies shown in the following table<br/><table> <tbody> <tr> <td>Policy&nbsp;definition&nbsp;</td> <td>Resource type&nbsp;</td> <td>Scope&nbsp;</td> </tr> <tr> <td>Allowed resource types&nbsp;</td> <td>virtualSecurityGroups&nbsp;</td> <td>RG4&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks/subnets&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>networkSecurityGroups&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowd resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks&eacute;virtualPeerings&nbsp;</td> <td>RG6&nbsp;</td> </tr> </tbody> </table><br/>Sub2 -<br/>Sub2 contains the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Subnet&nbsp;</td> </tr> <tr> <td>vnetwork1&nbsp;</td> <td>Subnet11, Subnet12, &amp; Subnet13&nbsp;</td> </tr> <tr> <td>vnetwork2&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>Sub2 contains the virtual machines shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td> <p>Network</p> <p>interface&nbsp;</p> </td> <td> <p>Application</p> <p>security group&nbsp;</p> </td> <td>Connected to&nbsp;</td> </tr> <tr> <td>VM1&nbsp;</td> <td>NIC1&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM2&nbsp;</td> <td>NIC2&nbsp;</td> <td>ASG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM3&nbsp;</td> <td>NIC3&nbsp;</td> <td>None&nbsp;</td> <td>Subnet12&nbsp;</td> </tr> <tr> <td>VM4&nbsp;</td> <td>NIC4&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>VM5&nbsp;</td> <td>NIC5&nbsp;</td> <td>None&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>All virtual machines have public IP addresses & the Web Server (IIS) role installed. The firewalls for eah virtual machine allow ping requests & web requests<br/>Sub2 contains the network secuirty groups (NSGs) shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Associated to&nbsp;</td> </tr> <tr> <td>NSG1&nbsp;</td> <td>NIC2&nbsp;</td> </tr> <tr> <td>NSG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>NSG3&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>NSG4&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>NSG1 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG2 has inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>80&nbsp;</td><td>TCP&nbsp;</td><td>Internet&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG3 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>TCP&nbsp;</td><td>ASG1&nbsp;</td><td>ASG1&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>150&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>ASG2&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>200&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG4 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG1, NSG2, NSG3, & NSG4 have the outbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Inernet&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/><br/>Contoso.com contains the security groups shown in the following table. Technical requirements -<br/>Contoso identifies the following technical requirements:<br/>Deploy Azure Firewall to vnetwork1 in Sub2<br/>Register an application named App2 in contoso.com<br/>Whenever possible, use the pinciple of least privilege.<br/>Enable AAD PIM for contoso.com<br/><br/>Questions<br/>You are evaluating the security of the network communication between the virtual machines in Sub2<br/>For each of the following statements, select Yes if the statement is true. Otherwise, select No<br/>Note : Each correct selection is worth one point<br/><table> <tbody> <tr> <td>Statements&nbsp;</td> <td>Yes&nbsp;</td> <td>No&nbsp;</td> </tr> <tr> <td>From VM1, you can successfully ping the public IP address of VM2&nbsp;</td> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>From VM1, you can successfully ping the private IP address of VM3&nbsp;</td> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;From VM1, you can successfully ping the privae IP address of VM5</td> <td>&nbsp;</td> <td>&nbsp;</td> </tr> </tbody> </table>|<details><summary>Answer</summary>Box 1 - No<br1>as traffic would be sourced from internet since it is sestined to the public IP address of VM2<br/><br/>Box 2 - Yes<br/>as no NSGs interfering & traffic is contained within thw same vnet<br/><br/>Box 3 - no<br/>as VM5 is in separate vnet & there is no mention of any peering going on</details>|
|9|Case Study -<br/><br/>Overview -<br/>Contoso.com Ltd company that has a main office in Montreal & two branch offices in Seattle & New York<br/>The company hosts its entire server infrastructure in Azure<br/>Contoso has two Azure subscriptions named Sub1 & Sub2. Both subscriptions are associated to an AAD tenant named contoso.com<br/><br/>Existing env -<br/>AAD-<br/>Contoso.com contains the users shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>City&nbsp;</td> <td>Role&nbsp;</td> </tr> <tr> <td>User1&nbsp;</td> <td>Montreal&nbsp;</td> <td>Global adminsitrator&nbsp;</td> </tr> <tr> <td>User2&nbsp;</td> <td>MONTREAL&nbsp;</td> <td>Security administrator&nbsp;</td> </tr> <tr> <td>User3&nbsp;</td> <td>London&nbsp;</td> <td>Privileged role administrator&nbsp;</td> </tr> <tr> <td>User4&nbsp;</td> <td>Ontario&nbsp;</td> <td>Application administrator&nbsp;</td> </tr> <tr> <td>User5&nbsp;</td> <td>Seattle&nbsp;</td> <td>Cloud application administrator&nbsp;</td> </tr> <tr> <td>User6&nbsp;</td> <td>Seattle&nbsp;</td> <td>User administrator&nbsp;</td> </tr> <tr> <td>User7&nbsp;</td> <td>Sydney&nbsp;</td> <td>Reports reader&nbsp;</td> </tr> <tr> <td>User8&nbsp;</td> <td>Sydney&nbsp;</td> <td>None&nbsp;</td> </tr> <tr> <td>User9&nbsp;</td> <td>Sydney&nbsp;</td> <td>Owner&nbsp;</td> </tr> </tbody> </table><br/>Contoso.com contains the security groups shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Membership type&nbsp;</td> <td>Dynamic membership rule&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -contains "ON"&nbsp;</td> </tr> <tr> <td>Group2&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -match "*on"&nbsp;</td> </tr> </tbody> </table><br/>Sub1 -<br/>Sub1 contains six resource groups named RG1, RG2, RG3, RG4, RG5, & RG6<br/>User3 creates the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Resource group&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>RG1&nbsp;</td> </tr> <tr> <td>vnet2&nbsp;</td> <td>RG2&nbsp;</td> </tr> <tr> <td>vnet3&nbsp;</td> <td>RG3&nbsp;</td> </tr> <tr> <td>vnet4&nbsp;</td> <td>RG4&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the locks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Set on&nbsp;</td> <td>Lock type&nbsp;</td> </tr> <tr> <td>Lock1&nbsp;</td> <td>RG1&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock2&nbsp;</td> <td>RG2&nbsp;</td> <td>Read-only&nbsp;</td> </tr> <tr> <td>Lock3&nbsp;</td> <td>RG3&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock4&nbsp;</td> <td>RG3&nbsp;</td> <td>Read-only&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the Azure policies shown in the following table<br/><table> <tbody> <tr> <td>Policy&nbsp;definition&nbsp;</td> <td>Resource type&nbsp;</td> <td>Scope&nbsp;</td> </tr> <tr> <td>Allowed resource types&nbsp;</td> <td>virtualSecurityGroups&nbsp;</td> <td>RG4&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks/subnets&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>networkSecurityGroups&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowd resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks&eacute;virtualPeerings&nbsp;</td> <td>RG6&nbsp;</td> </tr> </tbody> </table><br/>Sub2 -<br/>Sub2 contains the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Subnet&nbsp;</td> </tr> <tr> <td>vnetwork1&nbsp;</td> <td>Subnet11, Subnet12, &amp; Subnet13&nbsp;</td> </tr> <tr> <td>vnetwork2&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>Sub2 contains the virtual machines shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td> <p>Network</p> <p>interface&nbsp;</p> </td> <td> <p>Application</p> <p>security group&nbsp;</p> </td> <td>Connected to&nbsp;</td> </tr> <tr> <td>VM1&nbsp;</td> <td>NIC1&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM2&nbsp;</td> <td>NIC2&nbsp;</td> <td>ASG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM3&nbsp;</td> <td>NIC3&nbsp;</td> <td>None&nbsp;</td> <td>Subnet12&nbsp;</td> </tr> <tr> <td>VM4&nbsp;</td> <td>NIC4&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>VM5&nbsp;</td> <td>NIC5&nbsp;</td> <td>None&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>All virtual machines have public IP addresses & the Web Server (IIS) role installed. The firewalls for eah virtual machine allow ping requests & web requests<br/>Sub2 contains the network secuirty groups (NSGs) shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Associated to&nbsp;</td> </tr> <tr> <td>NSG1&nbsp;</td> <td>NIC2&nbsp;</td> </tr> <tr> <td>NSG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>NSG3&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>NSG4&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>NSG1 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG2 has inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>80&nbsp;</td><td>TCP&nbsp;</td><td>Internet&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG3 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>TCP&nbsp;</td><td>ASG1&nbsp;</td><td>ASG1&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>150&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>ASG2&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>200&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG4 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG1, NSG2, NSG3, & NSG4 have the outbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Inernet&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/><br/>Contoso.com contains the security groups shown in the following table. Technical requirements -<br/>Contoso identifies the following technical requirements:<br/>Deploy Azure Firewall to vnetwork1 in Sub2<br/>Register an application named App2 in contoso.com<br/>Whenever possible, use the pinciple of least privilege.<br/>Enable AAD PIM for contoso.com<br/><br/>Questions<br/>You are evaluating the effect of the application security groups on the nework communication between the virtual machines in Sub2<br/>For each of the following statements, select Yes if the statement is true. Otherwise, select No<br/>Note : Each correct selection is worth one point<br/><table> <tbody> <tr> <td>Statements&nbsp;</td> <td>Yes&nbsp;</td> <td>No&nbsp;</td> </tr> <tr> <td>From VM1, you can successfully ping the private IP address of VM4&nbsp;</td> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>From VM2, you can successfully ping the private IP address of VM4</td> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>From VM1, you can connect to the web server on VM4&nbsp;</td> <td>&nbsp;</td> <td>&nbsp;</td> </tr> </tbody> </table>|<details><summary>Answer</summary>Box 1 - no<br/>TCP traffic doesn't allow ICMP. Hence from VM1 you can't ping VM4<br/><br/>Box 2 - yes<br/>all traffic allowd from ASG2 to NSG3<br/><br/>Box 3 - yes<br/>port 80 allowd from ASG1</details>|
|10|Case Study -<br/><br/>Overview -<br/>Contoso.com Ltd company that has a main office in Montreal & two branch offices in Seattle & New York<br/>The company hosts its entire server infrastructure in Azure<br/>Contoso has two Azure subscriptions named Sub1 & Sub2. Both subscriptions are associated to an AAD tenant named contoso.com<br/><br/>Existing env -<br/>AAD-<br/>Contoso.com contains the users shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>City&nbsp;</td> <td>Role&nbsp;</td> </tr> <tr> <td>User1&nbsp;</td> <td>Montreal&nbsp;</td> <td>Global adminsitrator&nbsp;</td> </tr> <tr> <td>User2&nbsp;</td> <td>MONTREAL&nbsp;</td> <td>Security administrator&nbsp;</td> </tr> <tr> <td>User3&nbsp;</td> <td>London&nbsp;</td> <td>Privileged role administrator&nbsp;</td> </tr> <tr> <td>User4&nbsp;</td> <td>Ontario&nbsp;</td> <td>Application administrator&nbsp;</td> </tr> <tr> <td>User5&nbsp;</td> <td>Seattle&nbsp;</td> <td>Cloud application administrator&nbsp;</td> </tr> <tr> <td>User6&nbsp;</td> <td>Seattle&nbsp;</td> <td>User administrator&nbsp;</td> </tr> <tr> <td>User7&nbsp;</td> <td>Sydney&nbsp;</td> <td>Reports reader&nbsp;</td> </tr> <tr> <td>User8&nbsp;</td> <td>Sydney&nbsp;</td> <td>None&nbsp;</td> </tr> <tr> <td>User9&nbsp;</td> <td>Sydney&nbsp;</td> <td>Owner&nbsp;</td> </tr> </tbody> </table><br/>Contoso.com contains the security groups shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Membership type&nbsp;</td> <td>Dynamic membership rule&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -contains "ON"&nbsp;</td> </tr> <tr> <td>Group2&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -match "*on"&nbsp;</td> </tr> </tbody> </table><br/>Sub1 -<br/>Sub1 contains six resource groups named RG1, RG2, RG3, RG4, RG5, & RG6<br/>User3 creates the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Resource group&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>RG1&nbsp;</td> </tr> <tr> <td>vnet2&nbsp;</td> <td>RG2&nbsp;</td> </tr> <tr> <td>vnet3&nbsp;</td> <td>RG3&nbsp;</td> </tr> <tr> <td>vnet4&nbsp;</td> <td>RG4&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the locks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Set on&nbsp;</td> <td>Lock type&nbsp;</td> </tr> <tr> <td>Lock1&nbsp;</td> <td>RG1&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock2&nbsp;</td> <td>RG2&nbsp;</td> <td>Read-only&nbsp;</td> </tr> <tr> <td>Lock3&nbsp;</td> <td>RG3&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock4&nbsp;</td> <td>RG3&nbsp;</td> <td>Read-only&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the Azure policies shown in the following table<br/><table> <tbody> <tr> <td>Policy&nbsp;definition&nbsp;</td> <td>Resource type&nbsp;</td> <td>Scope&nbsp;</td> </tr> <tr> <td>Allowed resource types&nbsp;</td> <td>virtualSecurityGroups&nbsp;</td> <td>RG4&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks/subnets&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>networkSecurityGroups&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowd resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks&eacute;virtualPeerings&nbsp;</td> <td>RG6&nbsp;</td> </tr> </tbody> </table><br/>Sub2 -<br/>Sub2 contains the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Subnet&nbsp;</td> </tr> <tr> <td>vnetwork1&nbsp;</td> <td>Subnet11, Subnet12, &amp; Subnet13&nbsp;</td> </tr> <tr> <td>vnetwork2&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>Sub2 contains the virtual machines shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td> <p>Network</p> <p>interface&nbsp;</p> </td> <td> <p>Application</p> <p>security group&nbsp;</p> </td> <td>Connected to&nbsp;</td> </tr> <tr> <td>VM1&nbsp;</td> <td>NIC1&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM2&nbsp;</td> <td>NIC2&nbsp;</td> <td>ASG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM3&nbsp;</td> <td>NIC3&nbsp;</td> <td>None&nbsp;</td> <td>Subnet12&nbsp;</td> </tr> <tr> <td>VM4&nbsp;</td> <td>NIC4&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>VM5&nbsp;</td> <td>NIC5&nbsp;</td> <td>None&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>All virtual machines have public IP addresses & the Web Server (IIS) role installed. The firewalls for eah virtual machine allow ping requests & web requests<br/>Sub2 contains the network secuirty groups (NSGs) shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Associated to&nbsp;</td> </tr> <tr> <td>NSG1&nbsp;</td> <td>NIC2&nbsp;</td> </tr> <tr> <td>NSG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>NSG3&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>NSG4&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>NSG1 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG2 has inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>80&nbsp;</td><td>TCP&nbsp;</td><td>Internet&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG3 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>TCP&nbsp;</td><td>ASG1&nbsp;</td><td>ASG1&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>150&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>ASG2&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>200&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG4 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG1, NSG2, NSG3, & NSG4 have the outbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Inernet&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/><br/>Contoso.com contains the security groups shown in the following table. Technical requirements -<br/>Contoso identifies the following technical requirements:<br/>Deploy Azure Firewall to vnetwork1 in Sub2<br/>Register an application named App2 in contoso.com<br/>Whenever possible, use the pinciple of least privilege.<br/>Enable AAD PIM for contoso.com<br/><br/>Questions<br/>You need to meet the technical requirements for vnetwork1<br/>What should you do first?<br/><br/>a. Create a new subnet on VNetwork1<br/>b. Remove the NSGs from Subnet11 & Subnet13<br/>c. Associate an NSG to Subnet12<br/>d. Configure DDoS protection for VNetwork1|<details><summary>Answer</summary>a. Create a new subnet on VNetwork1<br/><br/>From scenario : Deploy Azure Firwall to VNetwork1 in Sub2<br/>Azure firwall needs a dedicated subnet named AzureFirewallSubnet<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/firewall/tutorial-firewall-deploy-portal</details>|
|11|Case Study -<br/><br/>Overview -<br/>Contoso.com Ltd company that has a main office in Montreal & two branch offices in Seattle & New York<br/>The company hosts its entire server infrastructure in Azure<br/>Contoso has two Azure subscriptions named Sub1 & Sub2. Both subscriptions are associated to an AAD tenant named contoso.com<br/><br/>Existing env -<br/>AAD-<br/>Contoso.com contains the users shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>City&nbsp;</td> <td>Role&nbsp;</td> </tr> <tr> <td>User1&nbsp;</td> <td>Montreal&nbsp;</td> <td>Global adminsitrator&nbsp;</td> </tr> <tr> <td>User2&nbsp;</td> <td>MONTREAL&nbsp;</td> <td>Security administrator&nbsp;</td> </tr> <tr> <td>User3&nbsp;</td> <td>London&nbsp;</td> <td>Privileged role administrator&nbsp;</td> </tr> <tr> <td>User4&nbsp;</td> <td>Ontario&nbsp;</td> <td>Application administrator&nbsp;</td> </tr> <tr> <td>User5&nbsp;</td> <td>Seattle&nbsp;</td> <td>Cloud application administrator&nbsp;</td> </tr> <tr> <td>User6&nbsp;</td> <td>Seattle&nbsp;</td> <td>User administrator&nbsp;</td> </tr> <tr> <td>User7&nbsp;</td> <td>Sydney&nbsp;</td> <td>Reports reader&nbsp;</td> </tr> <tr> <td>User8&nbsp;</td> <td>Sydney&nbsp;</td> <td>None&nbsp;</td> </tr> <tr> <td>User9&nbsp;</td> <td>Sydney&nbsp;</td> <td>Owner&nbsp;</td> </tr> </tbody> </table><br/>Contoso.com contains the security groups shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Membership type&nbsp;</td> <td>Dynamic membership rule&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -contains "ON"&nbsp;</td> </tr> <tr> <td>Group2&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -match "*on"&nbsp;</td> </tr> </tbody> </table><br/>Sub1 -<br/>Sub1 contains six resource groups named RG1, RG2, RG3, RG4, RG5, & RG6<br/>User3 creates the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Resource group&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>RG1&nbsp;</td> </tr> <tr> <td>vnet2&nbsp;</td> <td>RG2&nbsp;</td> </tr> <tr> <td>vnet3&nbsp;</td> <td>RG3&nbsp;</td> </tr> <tr> <td>vnet4&nbsp;</td> <td>RG4&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the locks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Set on&nbsp;</td> <td>Lock type&nbsp;</td> </tr> <tr> <td>Lock1&nbsp;</td> <td>RG1&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock2&nbsp;</td> <td>RG2&nbsp;</td> <td>Read-only&nbsp;</td> </tr> <tr> <td>Lock3&nbsp;</td> <td>RG3&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock4&nbsp;</td> <td>RG3&nbsp;</td> <td>Read-only&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the Azure policies shown in the following table<br/><table> <tbody> <tr> <td>Policy&nbsp;definition&nbsp;</td> <td>Resource type&nbsp;</td> <td>Scope&nbsp;</td> </tr> <tr> <td>Allowed resource types&nbsp;</td> <td>virtualSecurityGroups&nbsp;</td> <td>RG4&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks/subnets&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>networkSecurityGroups&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowd resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks&eacute;virtualPeerings&nbsp;</td> <td>RG6&nbsp;</td> </tr> </tbody> </table><br/>Sub2 -<br/>Sub2 contains the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Subnet&nbsp;</td> </tr> <tr> <td>vnetwork1&nbsp;</td> <td>Subnet11, Subnet12, &amp; Subnet13&nbsp;</td> </tr> <tr> <td>vnetwork2&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>Sub2 contains the virtual machines shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td> <p>Network</p> <p>interface&nbsp;</p> </td> <td> <p>Application</p> <p>security group&nbsp;</p> </td> <td>Connected to&nbsp;</td> </tr> <tr> <td>VM1&nbsp;</td> <td>NIC1&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM2&nbsp;</td> <td>NIC2&nbsp;</td> <td>ASG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM3&nbsp;</td> <td>NIC3&nbsp;</td> <td>None&nbsp;</td> <td>Subnet12&nbsp;</td> </tr> <tr> <td>VM4&nbsp;</td> <td>NIC4&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>VM5&nbsp;</td> <td>NIC5&nbsp;</td> <td>None&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>All virtual machines have public IP addresses & the Web Server (IIS) role installed. The firewalls for eah virtual machine allow ping requests & web requests<br/>Sub2 contains the network secuirty groups (NSGs) shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Associated to&nbsp;</td> </tr> <tr> <td>NSG1&nbsp;</td> <td>NIC2&nbsp;</td> </tr> <tr> <td>NSG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>NSG3&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>NSG4&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>NSG1 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG2 has inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>80&nbsp;</td><td>TCP&nbsp;</td><td>Internet&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG3 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>TCP&nbsp;</td><td>ASG1&nbsp;</td><td>ASG1&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>150&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>ASG2&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>200&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG4 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG1, NSG2, NSG3, & NSG4 have the outbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Inernet&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/><br/>Contoso.com contains the security groups shown in the following table. Technical requirements -<br/>Contoso identifies the following technical requirements:<br/>Deploy Azure Firewall to vnetwork1 in Sub2<br/>Register an application named App2 in contoso.com<br/>Whenever possible, use the pinciple of least privilege.<br/>Enable AAD PIM for contoso.com<br/><br/>Questions<br/>You are evaluting the security of VM1, VM2, VM3 in Sub2<br/>For each of the following statements, select Yes if the statement is true. Otherwise, select No<br/>Note : Each correct selection is worth one point<br/><table> <tbody> <tr> <td>Statements&nbsp;</td> <td>Yes&nbsp;</td> <td>No&nbsp;</td> </tr> <tr> <td>From the Internet, you can connect to the web server on VM1 by using HTTP&nbsp;</td> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>From the Internet, you can connect to the web server on VM2 by using HTTP&nbsp;</td> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>From the Internet, you can connect to the web server on VM3 by using HTTP&nbsp;</td> <td>&nbsp;</td> <td>&nbsp;</td> </tr> </tbody> </table>|<details><summary>Answer</summary>Box 1 - yes<br/>NSG2 applies to VM1 & this allows inbound traffic on port 80<br/><br/>Box 2 - no<br/>NSG2 & NSG1 apply to VM2. NSG2 allows the inbound traffic on port 80 but NSG1 does not allow it<br/><br/>Box 3 - yes<br/>There are NSGs applying to VM3 so all ports will be open</details>|
|12|Case Study -<br/><br/>Overview -<br/>Contoso.com Ltd company that has a main office in Montreal & two branch offices in Seattle & New York<br/>The company hosts its entire server infrastructure in Azure<br/>Contoso has two Azure subscriptions named Sub1 & Sub2. Both subscriptions are associated to an AAD tenant named contoso.com<br/><br/>Existing env -<br/>AAD-<br/>Contoso.com contains the users shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>City&nbsp;</td> <td>Role&nbsp;</td> </tr> <tr> <td>User1&nbsp;</td> <td>Montreal&nbsp;</td> <td>Global adminsitrator&nbsp;</td> </tr> <tr> <td>User2&nbsp;</td> <td>MONTREAL&nbsp;</td> <td>Security administrator&nbsp;</td> </tr> <tr> <td>User3&nbsp;</td> <td>London&nbsp;</td> <td>Privileged role administrator&nbsp;</td> </tr> <tr> <td>User4&nbsp;</td> <td>Ontario&nbsp;</td> <td>Application administrator&nbsp;</td> </tr> <tr> <td>User5&nbsp;</td> <td>Seattle&nbsp;</td> <td>Cloud application administrator&nbsp;</td> </tr> <tr> <td>User6&nbsp;</td> <td>Seattle&nbsp;</td> <td>User administrator&nbsp;</td> </tr> <tr> <td>User7&nbsp;</td> <td>Sydney&nbsp;</td> <td>Reports reader&nbsp;</td> </tr> <tr> <td>User8&nbsp;</td> <td>Sydney&nbsp;</td> <td>None&nbsp;</td> </tr> <tr> <td>User9&nbsp;</td> <td>Sydney&nbsp;</td> <td>Owner&nbsp;</td> </tr> </tbody> </table><br/>Contoso.com contains the security groups shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Membership type&nbsp;</td> <td>Dynamic membership rule&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -contains "ON"&nbsp;</td> </tr> <tr> <td>Group2&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -match "*on"&nbsp;</td> </tr> </tbody> </table><br/>Sub1 -<br/>Sub1 contains six resource groups named RG1, RG2, RG3, RG4, RG5, & RG6<br/>User3 creates the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Resource group&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>RG1&nbsp;</td> </tr> <tr> <td>vnet2&nbsp;</td> <td>RG2&nbsp;</td> </tr> <tr> <td>vnet3&nbsp;</td> <td>RG3&nbsp;</td> </tr> <tr> <td>vnet4&nbsp;</td> <td>RG4&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the locks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Set on&nbsp;</td> <td>Lock type&nbsp;</td> </tr> <tr> <td>Lock1&nbsp;</td> <td>RG1&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock2&nbsp;</td> <td>RG2&nbsp;</td> <td>Read-only&nbsp;</td> </tr> <tr> <td>Lock3&nbsp;</td> <td>RG3&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock4&nbsp;</td> <td>RG3&nbsp;</td> <td>Read-only&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the Azure policies shown in the following table<br/><table> <tbody> <tr> <td>Policy&nbsp;definition&nbsp;</td> <td>Resource type&nbsp;</td> <td>Scope&nbsp;</td> </tr> <tr> <td>Allowed resource types&nbsp;</td> <td>virtualSecurityGroups&nbsp;</td> <td>RG4&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks/subnets&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>networkSecurityGroups&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowd resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks&eacute;virtualPeerings&nbsp;</td> <td>RG6&nbsp;</td> </tr> </tbody> </table><br/>Sub2 -<br/>Sub2 contains the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Subnet&nbsp;</td> </tr> <tr> <td>vnetwork1&nbsp;</td> <td>Subnet11, Subnet12, &amp; Subnet13&nbsp;</td> </tr> <tr> <td>vnetwork2&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>Sub2 contains the virtual machines shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td> <p>Network</p> <p>interface&nbsp;</p> </td> <td> <p>Application</p> <p>security group&nbsp;</p> </td> <td>Connected to&nbsp;</td> </tr> <tr> <td>VM1&nbsp;</td> <td>NIC1&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM2&nbsp;</td> <td>NIC2&nbsp;</td> <td>ASG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM3&nbsp;</td> <td>NIC3&nbsp;</td> <td>None&nbsp;</td> <td>Subnet12&nbsp;</td> </tr> <tr> <td>VM4&nbsp;</td> <td>NIC4&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>VM5&nbsp;</td> <td>NIC5&nbsp;</td> <td>None&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>All virtual machines have public IP addresses & the Web Server (IIS) role installed. The firewalls for eah virtual machine allow ping requests & web requests<br/>Sub2 contains the network secuirty groups (NSGs) shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Associated to&nbsp;</td> </tr> <tr> <td>NSG1&nbsp;</td> <td>NIC2&nbsp;</td> </tr> <tr> <td>NSG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>NSG3&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>NSG4&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>NSG1 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG2 has inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>80&nbsp;</td><td>TCP&nbsp;</td><td>Internet&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG3 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>TCP&nbsp;</td><td>ASG1&nbsp;</td><td>ASG1&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>150&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>ASG2&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>200&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG4 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG1, NSG2, NSG3, & NSG4 have the outbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Inernet&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/><br/>Contoso.com contains the security groups shown in the following table. Technical requirements -<br/>Contoso identifies the following technical requirements:<br/>Deploy Azure Firewall to vnetwork1 in Sub2<br/>Register an application named App2 in contoso.com<br/>Whenever possible, use the pinciple of least privilege.<br/>Enable AAD PIM for contoso.com<br/><br/>Questions<br/>You assign User8 the Owner role for RG4, RG5, & RG6<br/>In which resource groups can User8 create virtual networks & NSGs? To answer, select the appropriate options in the answer area<br/>Note : Each correct selection is worth one point<br/><table> <tbody> <tr> <td>User8 can create virtual networks in :&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>RG4 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>RG6 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>RG4 &amp; RG6 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>RG4, RG5, RG6&nbsp;</td> </tr> </tbody> </table><br/><table> <tbody> <tr> <td>User8 can create NSGs in :&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>RG4 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>RG4 &amp; RG5 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>RG4 &amp; RG6 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>RG4, RG5, &amp; RG6&nbsp;</td> </tr> </tbody> </table>|<details><summary>Answer</summary>Box 1 - RG6 only<br/>Allowd Resource type (Deny): Defines the resource types that you can deploy. its effect is to deny all resources that aren't part of this defined list<br/><br/>Box 2 - RG4 & RG6</details>|
|13|Case Study -<br/><br/>Overview -<br/>Contoso.com Ltd company that has a main office in Montreal & two branch offices in Seattle & New York<br/>The company hosts its entire server infrastructure in Azure<br/>Contoso has two Azure subscriptions named Sub1 & Sub2. Both subscriptions are associated to an AAD tenant named contoso.com<br/><br/>Existing env -<br/>AAD-<br/>Contoso.com contains the users shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>City&nbsp;</td> <td>Role&nbsp;</td> </tr> <tr> <td>User1&nbsp;</td> <td>Montreal&nbsp;</td> <td>Global adminsitrator&nbsp;</td> </tr> <tr> <td>User2&nbsp;</td> <td>MONTREAL&nbsp;</td> <td>Security administrator&nbsp;</td> </tr> <tr> <td>User3&nbsp;</td> <td>London&nbsp;</td> <td>Privileged role administrator&nbsp;</td> </tr> <tr> <td>User4&nbsp;</td> <td>Ontario&nbsp;</td> <td>Application administrator&nbsp;</td> </tr> <tr> <td>User5&nbsp;</td> <td>Seattle&nbsp;</td> <td>Cloud application administrator&nbsp;</td> </tr> <tr> <td>User6&nbsp;</td> <td>Seattle&nbsp;</td> <td>User administrator&nbsp;</td> </tr> <tr> <td>User7&nbsp;</td> <td>Sydney&nbsp;</td> <td>Reports reader&nbsp;</td> </tr> <tr> <td>User8&nbsp;</td> <td>Sydney&nbsp;</td> <td>None&nbsp;</td> </tr> <tr> <td>User9&nbsp;</td> <td>Sydney&nbsp;</td> <td>Owner&nbsp;</td> </tr> </tbody> </table><br/>Contoso.com contains the security groups shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Membership type&nbsp;</td> <td>Dynamic membership rule&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -contains "ON"&nbsp;</td> </tr> <tr> <td>Group2&nbsp;</td> <td>Dynamic user&nbsp;</td> <td>user.city -match "*on"&nbsp;</td> </tr> </tbody> </table><br/>Sub1 -<br/>Sub1 contains six resource groups named RG1, RG2, RG3, RG4, RG5, & RG6<br/>User3 creates the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Resource group&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>RG1&nbsp;</td> </tr> <tr> <td>vnet2&nbsp;</td> <td>RG2&nbsp;</td> </tr> <tr> <td>vnet3&nbsp;</td> <td>RG3&nbsp;</td> </tr> <tr> <td>vnet4&nbsp;</td> <td>RG4&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the locks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Set on&nbsp;</td> <td>Lock type&nbsp;</td> </tr> <tr> <td>Lock1&nbsp;</td> <td>RG1&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock2&nbsp;</td> <td>RG2&nbsp;</td> <td>Read-only&nbsp;</td> </tr> <tr> <td>Lock3&nbsp;</td> <td>RG3&nbsp;</td> <td>Delete&nbsp;</td> </tr> <tr> <td>Lock4&nbsp;</td> <td>RG3&nbsp;</td> <td>Read-only&nbsp;</td> </tr> </tbody> </table><br/>Sub1 contains the Azure policies shown in the following table<br/><table> <tbody> <tr> <td>Policy&nbsp;definition&nbsp;</td> <td>Resource type&nbsp;</td> <td>Scope&nbsp;</td> </tr> <tr> <td>Allowed resource types&nbsp;</td> <td>virtualSecurityGroups&nbsp;</td> <td>RG4&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks/subnets&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowed resource</p> <p>types&nbsp;</p> </td> <td>networkSecurityGroups&nbsp;</td> <td>RG5&nbsp;</td> </tr> <tr> <td> <p>Not allowd resource</p> <p>types&nbsp;</p> </td> <td>virtualNetworks&eacute;virtualPeerings&nbsp;</td> <td>RG6&nbsp;</td> </tr> </tbody> </table><br/>Sub2 -<br/>Sub2 contains the virtual networks shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Subnet&nbsp;</td> </tr> <tr> <td>vnetwork1&nbsp;</td> <td>Subnet11, Subnet12, &amp; Subnet13&nbsp;</td> </tr> <tr> <td>vnetwork2&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>Sub2 contains the virtual machines shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td> <p>Network</p> <p>interface&nbsp;</p> </td> <td> <p>Application</p> <p>security group&nbsp;</p> </td> <td>Connected to&nbsp;</td> </tr> <tr> <td>VM1&nbsp;</td> <td>NIC1&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM2&nbsp;</td> <td>NIC2&nbsp;</td> <td>ASG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>VM3&nbsp;</td> <td>NIC3&nbsp;</td> <td>None&nbsp;</td> <td>Subnet12&nbsp;</td> </tr> <tr> <td>VM4&nbsp;</td> <td>NIC4&nbsp;</td> <td>ASG1&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>VM5&nbsp;</td> <td>NIC5&nbsp;</td> <td>None&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>All virtual machines have public IP addresses & the Web Server (IIS) role installed. The firewalls for eah virtual machine allow ping requests & web requests<br/>Sub2 contains the network secuirty groups (NSGs) shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Associated to&nbsp;</td> </tr> <tr> <td>NSG1&nbsp;</td> <td>NIC2&nbsp;</td> </tr> <tr> <td>NSG2&nbsp;</td> <td>Subnet11&nbsp;</td> </tr> <tr> <td>NSG3&nbsp;</td> <td>Subnet13&nbsp;</td> </tr> <tr> <td>NSG4&nbsp;</td> <td>Subnet21&nbsp;</td> </tr> </tbody> </table><br/>NSG1 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG2 has inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>80&nbsp;</td><td>TCP&nbsp;</td><td>Internet&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG3 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>TCP&nbsp;</td><td>ASG1&nbsp;</td><td>ASG1&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>150&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>ASG2&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>200&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG4 has the inbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>100&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>AzureLoadBalancer&nbsp;</td><td>Any&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/>NSG1, NSG2, NSG3, & NSG4 have the outbound security rules shown in the following table<br/><table><tbody><tr><td>Priority&nbsp;</td><td>Port&nbsp;</td><td>Protocol&nbsp;</td><td>Source&nbsp;</td><td>Destination&nbsp;</td><td>Action&nbsp;</td></tr><tr><td>65000&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>VirtualNetwork&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65001&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Inernet&nbsp;</td><td>Allow&nbsp;</td></tr><tr><td>65500&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Any&nbsp;</td><td>Deny&nbsp;</td></tr></tbody></table><br/><br/>Contoso.com contains the security groups shown in the following table. Technical requirements -<br/>Contoso identifies the following technical requirements:<br/>Deploy Azure Firewall to vnetwork1 in Sub2<br/>Register an application named App2 in contoso.com<br/>Whenever possible, use the pinciple of least privilege.<br/>Enable AAD PIM for contoso.com<br/><br/>Questions<br/>Which virtual networks in Sub1 can User9 modify & delete in their current state? To answer, select the appropriate options in the asnwer area<br/>Note : Each correct selection is worth one point<br/><table> <tbody> <tr> <td>Virtual networks that User9 can modify :&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>vnet4 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>vnet4 &amp; vnet1 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>vnet4, vnet3, vnet1 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>vnet4, vnet3, vnet2, &amp; vnet1&nbsp;</td> </tr> </tbody> </table><br/><table> <tbody> <tr> <td>Virtual networks that User9 can delete :&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>vnet4 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>vnet4 &amp; vnet1 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>vnet4, vnet3, vnet1 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>vnet4, vnet3, vnet2, &amp; vnet1&nbsp;</td> </tr> </tbody> </table>|<details><summary>Answer</summary>Box 1 - vnet4 & vnet1 only<br/>RG1 has only Delete lock, while there are no locks on RG4<br/>RG2 & RG3 both have REad-only locks<br/><br/>Box 2 - vnet4 only<br/>There are no locks on RG4, while the otehr resource groups have either Delete or REad-only locks<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/lock-resources?tabs=json</details>|
|14|Start the case study -<br/><br/>Overview -<br/>Litware, Inc. is a digital media company that has 500 employees in the Chicago are & 20 employees in the San Francisco are<br/><br/>Existing Env -<br/>Litware has an Azure subscription named Sub1 that has a subscription ID of 43894a43-17c2-4a39-8cfc-3540c2653ef4<br/>Sub1 is associated to an AAD tename named litwareinc.com. The tenant contains the user objects & the device objects of all the Litware employees & their devices. Each user is assigned an AAD Premium P2 license. AAD PIM is activated<br/>The tenant contains the groups shown in the folowing table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Security group&nbsp;</td> <td> <p>A group that has the Dynamic User membership type,</p> <p>contains all the San Francisco users, &amp; provides</p> <p>access to many AAD applications &amp; Azure resources&nbsp;</p> </td> </tr> <tr> <td>Group2&nbsp;</td> <td>&nbsp;Security grou</td> <td> <p>A group that has the Dynamic User membership type &amp;</p> <p>contains the Chicago IT team&nbsp;</p> </td> </tr> </tbody> </table><br/>The Azure subscription contains the objects shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>Virtual network&nbsp;</td> <td> <p>vnet1 is a virtual network that contains</p> <p>security sensitive IT resources. Vnet1</p> <p>contains three subnets named Subnet0,</p> <p>Subnet1, &amp; AzureFirewallSubnet&nbsp;</p> </td> </tr> <tr> <td>VM0&nbsp;</td> <td>Virtual machine&nbsp;</td> <td> <p>VM0 is an Azure virtual machine that runs</p> <p>Windows Server 2016, connects to</p> <p>Subnet0, &amp; has just in time (JIT) VM</p> <p>access configured&nbsp;</p> </td> </tr> <tr> <td>VM1&nbsp;</td> <td>Virtual machine&nbsp;</td> <td> <p>VM1 is an Azure virtual machine that runs</p> <p>Windows Server 2016 &amp; connects to</p> <p>subnet0&nbsp;</p> </td> </tr> <tr> <td>SQLDB1&nbsp;</td> <td> <p>Azure SQL</p> <p>Database&nbsp;</p> </td> <td> <p>SQLDB1 is an Azure SQL database on a</p> <p>SQL Database server named</p> <p>LitwareSQLServer1&nbsp;</p> </td> </tr> <tr> <td>WebApp1&nbsp;</td> <td>Web app&nbsp;</td> <td> <p>WebApp1 is an Azure web app that is</p> <p>accessible by using https://litwareinc.com</p> <p>&amp; http://litwareinc.com&nbsp;</p> </td> </tr> <tr> <td>RG1&nbsp;</td> <td>Resource group&nbsp;</td> <td> <p>RG1 is a resource group that</p> <p>contains vnet1, VM0, &amp; VM1&nbsp;</p> </td> </tr> <tr> <td>RG2&nbsp;</td> <td>Resource group&nbsp;</td> <td> <p>RG2 is a resource group that</p> <p>contains shared IT resources&nbsp;</p> </td> </tr> </tbody> </table><br/>Identity & Access Requirements<br/>Azure Security Center is set to the Standard tier<br/>Requirements -<br/>Planned Changes -<br/>Litware plans to deploy the Azure resources shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>Firewall1&nbsp;</td> <td>Azure Firewall&nbsp;</td> <td>An Azure firwall on vnet1&nbsp;</td> </tr> <tr> <td>RT1&nbsp;</td> <td>Route table&nbsp;</td> <td> <p>A route table that will contain a route</p> <p>pointing to Firewall1 as the default</p> <p>gateway &amp; will be assigned to Subnet0&nbsp;</p> </td> </tr> <tr> <td>AKS1&nbsp;</td> <td>AKS&nbsp;</td> <td>A managed AKS cluster&nbsp;</td> </tr> </tbody> </table>Litware identifies the following identity & access requirements:<br/>All San Francisco users & their devices must be members of Group1<br/>The members of Group2 must be assigned the Contributor role to RG2 by using a permanent eligible assignment<br/>Users must be prevented from registering applications in AAD & from consenting to applications that access company information on the user? behalf<br/>Platform Protection Requirements<br/>Litware identifies the following platform protection requirements:<br/>Microsoft Antimalware must be installed on the virtual machines in RG1<br/>The members of Group2 must be assigned the AKS Cluster Admin Role<br/>AAD users must be able to authenticate to AKS1 by using their AAD credentials<br/>Following the implementation of the planned changes, the IT team must be able to connect to VM0 by using JIT VM access<br/>A new custom RBAC role named Role1 must be used to delegate the administration of the managed disks in RG1. Role1 must be available only for RG1<br/>Security Operations Requirements<br/>Litware must be able to customize the operating system security configurations in Azure Security Center<br/>Data & Application Requirements<br/>Litware identifies the following data & applications requirements:<br/>The users in Group2 must be able to authenticate to SQLDB1 by using their AAD credentials<br/>WebApp1 must enforce mutual authentication<br/><br/>General Requirements -<br/>Litware identifies the following general requirements:<br/>Whenever possible, administrative effort must be minimized<br/>Whenever possible, use of automation must be maximized<br/><br/>Question<br/>You need to ensure that you can meet the security opeations requirements. What should you do firts?<br/><br/>a. Turn on Auto Provisioning in Security Center<br/>b. Integrate Security Center & Microsoft Cloud App Security<br/>c. Upgrde the pricing tier of Security Center to Standard<br/>d. Modify the Security Center workspace configuration|<details><summary>Answer</summary>c. upgrade the pricing tier of Security Center to Standard<br/><br/>The Standard tier extens the capabilities of the Free tier to workloads running in private & other public clouds, providing unified security management & threat protection across your hybrid cloud worloads. The Standard tier also adds advanced threat detection capabilities, which uses built-in behavioral analytics & machine learning to identify attacks & zero-days exploits, access & application controls to reduce exposure to network attacks & malware, & more<br/><br/>**Scenario:** Security Opeations Requirements<br/>Litware must be able to customize the OS security configurations in Azure Security Center<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/defender-for-cloud/defender-for-cloud-introduction</details>|
|15|Start the case study -<br/><br/>Overview -<br/>Litware, Inc. is a digital media company that has 500 employees in the Chicago are & 20 employees in the San Francisco are<br/><br/>Existing Env -<br/>Litware has an Azure subscription named Sub1 that has a subscription ID of 43894a43-17c2-4a39-8cfc-3540c2653ef4<br/>Sub1 is associated to an AAD tename named litwareinc.com. The tenant contains the user objects & the device objects of all the Litware employees & their devices. Each user is assigned an AAD Premium P2 license. AAD PIM is activated<br/>The tenant contains the groups shown in the folowing table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Security group&nbsp;</td> <td> <p>A group that has the Dynamic User membership type,</p> <p>contains all the San Francisco users, &amp; provides</p> <p>access to many AAD applications &amp; Azure resources&nbsp;</p> </td> </tr> <tr> <td>Group2&nbsp;</td> <td>&nbsp;Security grou</td> <td> <p>A group that has the Dynamic User membership type &amp;</p> <p>contains the Chicago IT team&nbsp;</p> </td> </tr> </tbody> </table><br/>The Azure subscription contains the objects shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>Virtual network&nbsp;</td> <td> <p>vnet1 is a virtual network that contains</p> <p>security sensitive IT resources. Vnet1</p> <p>contains three subnets named Subnet0,</p> <p>Subnet1, &amp; AzureFirewallSubnet&nbsp;</p> </td> </tr> <tr> <td>VM0&nbsp;</td> <td>Virtual machine&nbsp;</td> <td> <p>VM0 is an Azure virtual machine that runs</p> <p>Windows Server 2016, connects to</p> <p>Subnet0, &amp; has just in time (JIT) VM</p> <p>access configured&nbsp;</p> </td> </tr> <tr> <td>VM1&nbsp;</td> <td>Virtual machine&nbsp;</td> <td> <p>VM1 is an Azure virtual machine that runs</p> <p>Windows Server 2016 &amp; connects to</p> <p>subnet0&nbsp;</p> </td> </tr> <tr> <td>SQLDB1&nbsp;</td> <td> <p>Azure SQL</p> <p>Database&nbsp;</p> </td> <td> <p>SQLDB1 is an Azure SQL database on a</p> <p>SQL Database server named</p> <p>LitwareSQLServer1&nbsp;</p> </td> </tr> <tr> <td>WebApp1&nbsp;</td> <td>Web app&nbsp;</td> <td> <p>WebApp1 is an Azure web app that is</p> <p>accessible by using https://litwareinc.com</p> <p>&amp; http://litwareinc.com&nbsp;</p> </td> </tr> <tr> <td>RG1&nbsp;</td> <td>Resource group&nbsp;</td> <td> <p>RG1 is a resource group that</p> <p>contains vnet1, VM0, &amp; VM1&nbsp;</p> </td> </tr> <tr> <td>RG2&nbsp;</td> <td>Resource group&nbsp;</td> <td> <p>RG2 is a resource group that</p> <p>contains shared IT resources&nbsp;</p> </td> </tr> </tbody> </table><br/>Identity & Access Requirements<br/>Azure Security Center is set to the Standard tier<br/>Requirements -<br/>Planned Changes -<br/>Litware plans to deploy the Azure resources shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>Firewall1&nbsp;</td> <td>Azure Firewall&nbsp;</td> <td>An Azure firwall on vnet1&nbsp;</td> </tr> <tr> <td>RT1&nbsp;</td> <td>Route table&nbsp;</td> <td> <p>A route table that will contain a route</p> <p>pointing to Firewall1 as the default</p> <p>gateway &amp; will be assigned to Subnet0&nbsp;</p> </td> </tr> <tr> <td>AKS1&nbsp;</td> <td>AKS&nbsp;</td> <td>A managed AKS cluster&nbsp;</td> </tr> </tbody> </table>Litware identifies the following identity & access requirements:<br/>All San Francisco users & their devices must be members of Group1<br/>The members of Group2 must be assigned the Contributor role to RG2 by using a permanent eligible assignment<br/>Users must be prevented from registering applications in AAD & from consenting to applications that access company information on the user? behalf<br/>Platform Protection Requirements<br/>Litware identifies the following platform protection requirements:<br/>Microsoft Antimalware must be installed on the virtual machines in RG1<br/>The members of Group2 must be assigned the AKS Cluster Admin Role<br/>AAD users must be able to authenticate to AKS1 by using their AAD credentials<br/>Following the implementation of the planned changes, the IT team must be able to connect to VM0 by using JIT VM access<br/>A new custom RBAC role named Role1 must be used to delegate the administration of the managed disks in RG1. Role1 must be available only for RG1<br/>Security Operations Requirements<br/>Litware must be able to customize the operating system security configurations in Azure Security Center<br/>Data & Application Requirements<br/>Litware identifies the following data & applications requirements:<br/>The users in Group2 must be able to authenticate to SQLDB1 by using their AAD credentials<br/>WebApp1 must enforce mutual authentication<br/><br/>General Requirements -<br/>Litware identifies the following general requirements:<br/>Whenever possible, administrative effort must be minimized<br/>Whenever possible, use of automation must be maximized<br/><br/>Question<br/>You need to confiugre WebApp1 to meet the data & application requirements<br/>Which two actions should you perform? Each correct answer presents part of the solution<br/>Note : Each correct selection is worth one point<br/><br/>a. Upload a public certificate<br/>b. Turn on the HTTPS Only protocol setting<br/>c. Set the Minimum TlS Version protocol setting to 1.2<br/>d. Change the pricing tier of the App Service plan<br/>e. Turn on the Incoming client certificates protocol setting|<details><summary>Answer</summary>b. Turn on the HTTPS Only protocol setting<br/>e. Turn on the Incoming client certificates protocol setting</details>|
|16|Start the case study -<br/><br/>Overview -<br/>Litware, Inc. is a digital media company that has 500 employees in the Chicago are & 20 employees in the San Francisco are<br/><br/>Existing Env -<br/>Litware has an Azure subscription named Sub1 that has a subscription ID of 43894a43-17c2-4a39-8cfc-3540c2653ef4<br/>Sub1 is associated to an AAD tename named litwareinc.com. The tenant contains the user objects & the device objects of all the Litware employees & their devices. Each user is assigned an AAD Premium P2 license. AAD PIM is activated<br/>The tenant contains the groups shown in the folowing table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Security group&nbsp;</td> <td> <p>A group that has the Dynamic User membership type,</p> <p>contains all the San Francisco users, &amp; provides</p> <p>access to many AAD applications &amp; Azure resources&nbsp;</p> </td> </tr> <tr> <td>Group2&nbsp;</td> <td>&nbsp;Security grou</td> <td> <p>A group that has the Dynamic User membership type &amp;</p> <p>contains the Chicago IT team&nbsp;</p> </td> </tr> </tbody> </table><br/>The Azure subscription contains the objects shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>Virtual network&nbsp;</td> <td> <p>vnet1 is a virtual network that contains</p> <p>security sensitive IT resources. Vnet1</p> <p>contains three subnets named Subnet0,</p> <p>Subnet1, &amp; AzureFirewallSubnet&nbsp;</p> </td> </tr> <tr> <td>VM0&nbsp;</td> <td>Virtual machine&nbsp;</td> <td> <p>VM0 is an Azure virtual machine that runs</p> <p>Windows Server 2016, connects to</p> <p>Subnet0, &amp; has just in time (JIT) VM</p> <p>access configured&nbsp;</p> </td> </tr> <tr> <td>VM1&nbsp;</td> <td>Virtual machine&nbsp;</td> <td> <p>VM1 is an Azure virtual machine that runs</p> <p>Windows Server 2016 &amp; connects to</p> <p>subnet0&nbsp;</p> </td> </tr> <tr> <td>SQLDB1&nbsp;</td> <td> <p>Azure SQL</p> <p>Database&nbsp;</p> </td> <td> <p>SQLDB1 is an Azure SQL database on a</p> <p>SQL Database server named</p> <p>LitwareSQLServer1&nbsp;</p> </td> </tr> <tr> <td>WebApp1&nbsp;</td> <td>Web app&nbsp;</td> <td> <p>WebApp1 is an Azure web app that is</p> <p>accessible by using https://litwareinc.com</p> <p>&amp; http://litwareinc.com&nbsp;</p> </td> </tr> <tr> <td>RG1&nbsp;</td> <td>Resource group&nbsp;</td> <td> <p>RG1 is a resource group that</p> <p>contains vnet1, VM0, &amp; VM1&nbsp;</p> </td> </tr> <tr> <td>RG2&nbsp;</td> <td>Resource group&nbsp;</td> <td> <p>RG2 is a resource group that</p> <p>contains shared IT resources&nbsp;</p> </td> </tr> </tbody> </table><br/>Identity & Access Requirements<br/>Azure Security Center is set to the Standard tier<br/>Requirements -<br/>Planned Changes -<br/>Litware plans to deploy the Azure resources shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>Firewall1&nbsp;</td> <td>Azure Firewall&nbsp;</td> <td>An Azure firwall on vnet1&nbsp;</td> </tr> <tr> <td>RT1&nbsp;</td> <td>Route table&nbsp;</td> <td> <p>A route table that will contain a route</p> <p>pointing to Firewall1 as the default</p> <p>gateway &amp; will be assigned to Subnet0&nbsp;</p> </td> </tr> <tr> <td>AKS1&nbsp;</td> <td>AKS&nbsp;</td> <td>A managed AKS cluster&nbsp;</td> </tr> </tbody> </table>Litware identifies the following identity & access requirements:<br/>All San Francisco users & their devices must be members of Group1<br/>The members of Group2 must be assigned the Contributor role to RG2 by using a permanent eligible assignment<br/>Users must be prevented from registering applications in AAD & from consenting to applications that access company information on the user? behalf<br/>Platform Protection Requirements<br/>Litware identifies the following platform protection requirements:<br/>Microsoft Antimalware must be installed on the virtual machines in RG1<br/>The members of Group2 must be assigned the AKS Cluster Admin Role<br/>AAD users must be able to authenticate to AKS1 by using their AAD credentials<br/>Following the implementation of the planned changes, the IT team must be able to connect to VM0 by using JIT VM access<br/>A new custom RBAC role named Role1 must be used to delegate the administration of the managed disks in RG1. Role1 must be available only for RG1<br/>Security Operations Requirements<br/>Litware must be able to customize the operating system security configurations in Azure Security Center<br/>Data & Application Requirements<br/>Litware identifies the following data & applications requirements:<br/>The users in Group2 must be able to authenticate to SQLDB1 by using their AAD credentials<br/>WebApp1 must enforce mutual authentication<br/><br/>General Requirements -<br/>Litware identifies the following general requirements:<br/>Whenever possible, administrative effort must be minimized<br/>Whenever possible, use of automation must be maximized<br/><br/>Question<br/>You need to create Role1 to meet the platform protection requirements<br/>How should you complete the role definition of Role1? To answer, select the appropriate options in the answer area<br/>Note : Each correct selection is worth one point<br/>`{`<br/>`	"Name": "Role1",`<br/>`	"Id": "11111111-1111-1111-1111-11111111",`<br/>`	"IsCustom": true,`<br/>`	"Description": "VM storage opeator",`<br/>`	"Actions": [`<br/>`		"Microsoft.Compute/, or Microsoft.Resources/, or Microsoft.Storage/",`<br/>`		"disks/*, or storageAccounts/*, or virtualMachines/disks/*"`<br/>`	],`<br/>`	"NotActions": [`<br/>`	              ],`<br/>`	"AssignableScopes": [`<br/>`		"/, or /subscriptions/4389a43-17c2-4a39-8cfc-3540c2653ef4/resourceGroups/RG1, or /subscriptions/4389a43-17c2-4a39-8cfc-3540c2653ef4"`<br/>`	]`<br/>`}`|<details><summary>Answer</summary>Box 1 - Microsoft.Compute/disks/*<br/>Box 2 - the one with RG1<br/><br/>Microsoft.Compute/disks/read Get teh proeprties of a Disk<br/>Microsoft.Compute/disks/write Creates a new Disk or updates an existing one<br/>Microsoft.Compute/disks/delete Deletes the Disk<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/role-based-access-control/resource-provider-operations#compute</details>|
|17|Start the case study -<br/><br/>Overview -<br/>Litware, Inc. is a digital media company that has 500 employees in the Chicago are & 20 employees in the San Francisco are<br/><br/>Existing Env -<br/>Litware has an Azure subscription named Sub1 that has a subscription ID of 43894a43-17c2-4a39-8cfc-3540c2653ef4<br/>Sub1 is associated to an AAD tename named litwareinc.com. The tenant contains the user objects & the device objects of all the Litware employees & their devices. Each user is assigned an AAD Premium P2 license. AAD PIM is activated<br/>The tenant contains the groups shown in the folowing table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>Group1&nbsp;</td> <td>Security group&nbsp;</td> <td> <p>A group that has the Dynamic User membership type,</p> <p>contains all the San Francisco users, &amp; provides</p> <p>access to many AAD applications &amp; Azure resources&nbsp;</p> </td> </tr> <tr> <td>Group2&nbsp;</td> <td>&nbsp;Security grou</td> <td> <p>A group that has the Dynamic User membership type &amp;</p> <p>contains the Chicago IT team&nbsp;</p> </td> </tr> </tbody> </table><br/>The Azure subscription contains the objects shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>vnet1&nbsp;</td> <td>Virtual network&nbsp;</td> <td> <p>vnet1 is a virtual network that contains</p> <p>security sensitive IT resources. Vnet1</p> <p>contains three subnets named Subnet0,</p> <p>Subnet1, &amp; AzureFirewallSubnet&nbsp;</p> </td> </tr> <tr> <td>VM0&nbsp;</td> <td>Virtual machine&nbsp;</td> <td> <p>VM0 is an Azure virtual machine that runs</p> <p>Windows Server 2016, connects to</p> <p>Subnet0, &amp; has just in time (JIT) VM</p> <p>access configured&nbsp;</p> </td> </tr> <tr> <td>VM1&nbsp;</td> <td>Virtual machine&nbsp;</td> <td> <p>VM1 is an Azure virtual machine that runs</p> <p>Windows Server 2016 &amp; connects to</p> <p>subnet0&nbsp;</p> </td> </tr> <tr> <td>SQLDB1&nbsp;</td> <td> <p>Azure SQL</p> <p>Database&nbsp;</p> </td> <td> <p>SQLDB1 is an Azure SQL database on a</p> <p>SQL Database server named</p> <p>LitwareSQLServer1&nbsp;</p> </td> </tr> <tr> <td>WebApp1&nbsp;</td> <td>Web app&nbsp;</td> <td> <p>WebApp1 is an Azure web app that is</p> <p>accessible by using https://litwareinc.com</p> <p>&amp; http://litwareinc.com&nbsp;</p> </td> </tr> <tr> <td>RG1&nbsp;</td> <td>Resource group&nbsp;</td> <td> <p>RG1 is a resource group that</p> <p>contains vnet1, VM0, &amp; VM1&nbsp;</p> </td> </tr> <tr> <td>RG2&nbsp;</td> <td>Resource group&nbsp;</td> <td> <p>RG2 is a resource group that</p> <p>contains shared IT resources&nbsp;</p> </td> </tr> </tbody> </table><br/>Identity & Access Requirements<br/>Azure Security Center is set to the Standard tier<br/>Requirements -<br/>Planned Changes -<br/>Litware plans to deploy the Azure resources shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Description&nbsp;</td> </tr> <tr> <td>Firewall1&nbsp;</td> <td>Azure Firewall&nbsp;</td> <td>An Azure firwall on vnet1&nbsp;</td> </tr> <tr> <td>RT1&nbsp;</td> <td>Route table&nbsp;</td> <td> <p>A route table that will contain a route</p> <p>pointing to Firewall1 as the default</p> <p>gateway &amp; will be assigned to Subnet0&nbsp;</p> </td> </tr> <tr> <td>AKS1&nbsp;</td> <td>AKS&nbsp;</td> <td>A managed AKS cluster&nbsp;</td> </tr> </tbody> </table>Litware identifies the following identity & access requirements:<br/>All San Francisco users & their devices must be members of Group1<br/>The members of Group2 must be assigned the Contributor role to RG2 by using a permanent eligible assignment<br/>Users must be prevented from registering applications in AAD & from consenting to applications that access company information on the user? behalf<br/>Platform Protection Requirements<br/>Litware identifies the following platform protection requirements:<br/>Microsoft Antimalware must be installed on the virtual machines in RG1<br/>The members of Group2 must be assigned the AKS Cluster Admin Role<br/>AAD users must be able to authenticate to AKS1 by using their AAD credentials<br/>Following the implementation of the planned changes, the IT team must be able to connect to VM0 by using JIT VM access<br/>A new custom RBAC role named Role1 must be used to delegate the administration of the managed disks in RG1. Role1 must be available only for RG1<br/>Security Operations Requirements<br/>Litware must be able to customize the operating system security configurations in Azure Security Center<br/>Data & Application Requirements<br/>Litware identifies the following data & applications requirements:<br/>The users in Group2 must be able to authenticate to SQLDB1 by using their AAD credentials<br/>WebApp1 must enforce mutual authentication<br/><br/>General Requirements -<br/>Litware identifies the following general requirements:<br/>Whenever possible, administrative effort must be minimized<br/>Whenever possible, use of automation must be maximized<br/><br/>Question<br/>You need to confiugre SQLDB1 to meet the data & application requirements<br/>Which three actions should you recommend be performed in sequence? to answer, move the appropirate actions from the list of actions to the answer area & arrange them in the correct order<br/><table> <tbody> <tr> <td>Actions&nbsp;</td> <td>Answer Area&nbsp;</td> </tr> <tr> <td> <p>From the Azure portal, create a managed</p> <p>identity&nbsp;</p> </td> <td>&nbsp;</td> </tr> <tr> <td> <p>Connect to SQLDB1 by using Microsoft SQL</p> <p>Server Management Studio (SSMS)&nbsp;</p> </td> <td>&nbsp;</td> </tr> <tr> <td> <p>In AAD, enable authentication method</p> <p>policy&nbsp;</p> </td> <td>&nbsp;</td> </tr> <tr> <td> <p>In SQLDB1, create contained database</p> <p>users&nbsp;</p> </td> <td>&nbsp;</td> </tr> <tr> <td> <p>From the Azure portal, create an AAD</p> <p>administrator for LitwareSQLServer1&nbsp;</p> </td> <td>&nbsp;</td> </tr> </tbody> </table>|<details><summary>Answer</summary>1. From the Azure portal, create an AAD administrator for LitwareSQLServer1<br/>2. Connect to SQLDB1 by using Microsoft SQL Servewr Management Studio (SSMS)<br/>3. In SQLDB1, create contained database users<br/><br/>You need to assign AD global admin user under SQL Server - AD admin<br1/>& then login with this user to SSMS using AAD - Password<br/>Once logged you can now create users at the db level from your AAD to whom you want to givew permission to login to SQL DB<br/>These users are called 'contained users'</details>|
