# Practice07-Î£20

---

## Questions
|n|Question|Answer|
|-|--------|------|
|1|Simulation -<br/>You need to ensure that the AzureBackupREport log for the VAult1 REcovery SErvices vault is stored in the WS11641655 Azure Log Analystics workspace<br/>To complete this task, sign in to the Azure portal & modify the Azure resources|<details><summary>Answer</summary><img src="https://i.imgur.com/iAOkCr6.png"></details>|
|2|You are configuring just in time (JIT) vm access to a set of Azure virtual machines<br/>You need to grant users PowerShell access to the virtual machine by suing JIT VM access<br/>What should you configure? To answer, select the appropriate options in the answer area<br/>Note : Each correct selection is worth one point<br/><table> <tbody> <tr> <td> <p>Permission that must be granted to&nbsp;</p> <p>users on VM :&nbsp;</p> </td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Read&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Update&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>View&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Write&nbsp;</td> </tr> </tbody> </table><br/><table> <tbody> <tr> <td>TCP port&nbsp;that must be allowed :&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>22&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>25&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>3389&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>5986&nbsp;</td> </tr> </tbody> </table>|<details><summary>Answer</summary>Box 1 - Read permission<br/>Box 2 - 5986<br/><img src="https://i.imgur.com/ndkUpwx.png"><br/>PowerShell access to Azure VMs typically uses the WinRM service, which requires specific ports to be open. The standard port for WinRM over HTTPS is:<br/>5986: This is the default port for PowerShell remoting over HTTPS<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/defender-for-cloud/just-in-time-access-overview?tabs=defender-for-container-arch-aks#what-permissions-are-needed-to-configure-and-use-jit</details>|
|3|You have an Azure subscription that contains the resources shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> <td>Region&nbsp;</td> <td>Resource group&nbsp;</td> </tr> <tr> <td>SQL1&nbsp;</td> <td>Azure SQL database&nbsp;</td> <td>East US&nbsp;</td> <td>RG1&nbsp;</td> </tr> <tr> <td>Analytics1&nbsp;</td> <td>Azure Log Analytics workspace&nbsp;</td> <td>East US&nbsp;</td> <td>RG1&nbsp;</td> </tr> <tr> <td>Analytics2&nbsp;</td> <td>Azure Log Analytics workspace&nbsp;</td> <td>East US&nbsp;</td> <td>RG2&nbsp;</td> </tr> <tr> <td>Analytics3&nbsp;</td> <td>Azure Log Analytics workspace&nbsp;</td> <td>West Europe&nbsp;</td> <td>RG1&nbsp;</td> </tr> </tbody> </table><br/>You create the Azure STorage accounts shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Region&nbsp;</td> <td> <p>Resource</p> <p>group&nbsp;</p> </td> <td>Storage account type&nbsp;</td> <td> <p>Access tier</p> <p>(default)&nbsp;</p> </td> </tr> <tr> <td>Storage1&nbsp;</td> <td>East US&nbsp;</td> <td>RG1&nbsp;</td> <td>Blob&nbsp;</td> <td>Cool&nbsp;</td> </tr> <tr> <td>Storage2&nbsp;</td> <td>East US&nbsp;</td> <td>RG2&nbsp;</td> <td>General purpose V1&nbsp;</td> <td>NA&nbsp;</td> </tr> <tr> <td>Storage3&nbsp;</td> <td>West Europe&nbsp;</td> <td>RG1&nbsp;</td> <td>General purpose V2&nbsp;</td> <td>Hot&nbsp;</td> </tr> </tbody> </table><br/>You need to configure auditing for SQL1<br/>Which storage accounts & Log Analytics workspaces can you use at the audit log destination? To answer, select the appropriate options in the answer area<br/>Note : Each correct selection is worth one point<br/><table> <tbody> <tr> <td> <p>Storage accounts that can be used</p> <p>as the audit log destionation :&nbsp;</p> </td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Storage1 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Storage2 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Storage1, &amp; Storage2 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Storage1, Storage2, &amp; Storage3&nbsp;</td> </tr> </tbody> </table><br/><table> <tbody> <tr> <td> <p>Log Analytics workspaces that can be used</p> <p>as the audit log destination :&nbsp;</p> </td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Analytics1 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Analytics1 &amp; Analytics2 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Analytics1 &amp; Analytics3 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Analytics1, Analytics2, &amp; Analytics 3&nbsp;</td> </tr> </tbody> </table>|<details><summary>Answer</summary>Box 1 - -Storage1 & 2<br/>Box 2 - Log analytics 1,2, & 3<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/azure-sql/database/audit-log-format?view=azuresql</details>|
|4|You have an Azure subscription named Sub1. Sub1 has an Azure Storage account named storage1 that contains the resources shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Type&nbsp;</td> </tr> <tr> <td>Container1&nbsp;</td> <td>Blob container&nbsp;</td> </tr> <tr> <td>Share1&nbsp;</td> <td>File share&nbsp;</td> </tr> </tbody> </table><br/>You generate a shared access signature (SAS) to connect to the blob service & the file service<br/>Which tool can you use to access the contents in Container1 & Share1 by using the SAS? To answer, select the appropriate options in the answer area<br/>Note : Each correct selection is worth one point<br/><table> <tbody> <tr> <td>Tools for Container1 :&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Robocopy.exe&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Azure Storage Explorer&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>File Explorer&nbsp;</td> </tr> </tbody> </table><br/><table> <tbody> <tr> <td>Tools for Share1 :&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Robocopy.exe&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Azure Storage Explorer&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>File Explorer&nbsp;</td> </tr> </tbody> </table>|<details><summary>Answer</summary>Box 1,2 - Azure Storage Explorer<br/>This one simple enough<br/>You don't map a file share from azure with SAS. LYou can use SAS with storage explorer though<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/storage/files/storage-how-to-use-files-windows#mount-the-azure-file-share</details>|
|5|You have an Azure Storage account named storage1 that has a container named container1<br/>You need to prevent the blobs in container1 from being modified<br/><br/>What should you do?<br/><br/>a. From container1, change the access level<br/>b. From container1, add an access policy<br/>c. From container1, modify the access Control (IAM) settings<br/>d. From storage1, enable soft delete for blobs|<details><summary>Answer</summary>b. From container1, add an access policy<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/storage/blobs/immutable-storage-overview?tabs=azure-portal</details>|
|6|Your company has an AAD tenant named contoso.com<br/>You plan to create several security alerts by using Azure Monitor<br/>You need to prepare the Azure subscription for the alerts<br/>What should you create first?<br/><br/>a. an Azure Storage account<br/>b. an Azure Log Analytics workspace<br/>c. an Azure event hub<br/>d. an Azure Automation account|<details><summary>Answer</summary>b. an Azure Log Analytics workspace<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/azure-monitor/logs/quick-create-workspace?tabs=azure-portal</details>|
|7|You company has an Azure subscription named Sub1. Sub1 contains an Azure web app named WebApp1 that uses Azure Application Insights. WebApp1 requires users to authenticate by using OAuth 2.0 client secrets<br/>Developpers at the company plan to create a multi-step web test app that preforms synthetic. Transactions emulating user traffic to Web App1<br/>You need to ensure that web tests can run unattended<br/><br/>What should you do first?<br/><br/>a. In Microsoft Visual STudio, modify the .webtest file<br/>b. Upload the .webtest file to Application Insights<br/>c. Register the web test app in AAD<br/>d. Add a plug-in to the web test app|<details><summary>Answer</summary>c. Register the web test app in AAD<br/>C is correct answer. The context of the question is from a Security/Access/Identities perspective, & not from developper's perspective. Check the anser here, section "cleint secret"<br/>ref:<br/>https://learn.microsoft.com/en-us/previous-versions/azure/azure-monitor/app/availability-multistep#dealing-with-sign-in</details>|
|8|You have an Azure subscription named Subscription1<br/>You deploy a LInux virtual machine named VM1 to Subscription1<br/>You need to monitor the metrics and the logs of VM1<br/>What should you use?<br/><br/>a. the AzurePerformanceDiagnostics extension<br/>b. Azure HDInsight<br/>c. Linux Diagnostic Extension (LAD) 3.0<br/>d. Azure Analysis Services|<details><summary>Answer</summary>c. Linux Diagnostic Extension (LAD) 3.0<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-linux?tabs=azcli</details>|
|9|You onboard Azure Sentinel. You connect Azure Sentinel to Azure Security center<br/>You need to automate the mitigation of incidents in Azure Sentinel. The solution must minimize administrative effort<br/>What should you create?<br/><br/>a. an alert rule<br/>b. a playbook<br/>c. a function app<br/>d. a runbook|<details><summary>Answer</summary>b. a playbook<br/><br/>In Azure Sentinel, playbooks are automated collections of procedures that can be triggered in response to an alert or incident. They are created using Azure Logic Apps and can be designed to perform a variety of tasks, such as sending notifications, triggering scripts, or even taking remediation actions. By using a playbook, you can automate responses to common or repetitive security threats, thereby reducing the need for manual intervention and administrative effort.<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/sentinel/tutorial-respond-threats-playbook?tabs=LAC%2Cincidents</details>|
|10|You have an AAD tenant named contoso.com<br/>You need to configure diagnostic settings for contoso.com. The solution must meet the following requirements:<br/>- Retain logs for two years<br/>- Query logs by using the Kusto query language<br/>- Minimize administrative effort<br/><br/>Where should you store the logs?<br/><br/>a. An azure event hub<br/>b. an Azure Log Analytics workspace<br/>c. an Azure Storage account|<details><summary>Answer</summary>b. an Azure Log Analytics workspace<br/>Data retention at the workspace level can be configured from 30 to 730 days (2 years) for all workspaces unless they are using the legacy Free pricing tier</details>|
|11|You are troubleshooting a security issue for an Azure Storage account<br/>You enable the diagnostic logs for the storage account<br/>What should you use to retrieve the diagnostics logs?<br/><br/>a. the Security & Compliance admin center<br/>b. Azure Security Center<br/>c. Azure Cosmos DB explorer<br/>d. azCopy|<details><summary>Answer</summary>d. azCopy<br/><br/>If you want to download the metrics for log-term storage of to analyze them locally, you must use a tool or write some code to read the tables. You must download the minute metrics for analysis. The tables don't appear if you list all the tables in you storage account, but you can access them directly by name<br/>Many storage-browsing tools are aware of these tables & enable you to view them directly (see azure storage client tools for a list of avaialble tools)<br/>Microsoft provides several GUI tools for working with the sta in your Azure Storage account. All of the tools outlined in the following are free<br/><br/>Note:<br/>1. Azure storage explorer<br/>2. azCopy<br/>ref:<br/>https://learn.microsoft.com/en-us/previous-versions/azure/storage/common/storage-analytics-metrics?toc=%2Fazure%2Fstorage%2Fblobs%2Ftoc.json<br/>https://learn.microsoft.com/en-us/azure/storage/common/storage-explorers</details>|
|12|You have an Azure subscription that contains the virtual machines shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>OS&nbsp;</td> </tr> <tr> <td>VM1&nbsp;</td> <td>Windows Server 2016&nbsp;</td> </tr> <tr> <td>VM2&nbsp;</td> <td>Ubuntu Server 18.04 LTS&nbsp;</td> </tr> </tbody> </table><br/>From Azure Security Center, you turn on Auto Provisioning<br/>You deploy the virtual machines shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>OS&nbsp;</td> </tr> <tr> <td>VM3&nbsp;</td> <td>Windows Server 2016&nbsp;</td> </tr> <tr> <td>VM4&nbsp;</td> <td>Ubuntu Server 18.04 LTS&nbsp;</td> </tr> </tbody> </table><br/>On which virtual machines is the Microsoft Monitoring Agent installed?<br/><br/>a. VM3 only<br/>b. VM1 & VM3 only<br/>c. VM3 & VM4 only<br/>d. VM1, VM2, VM3, & VM4|<details><summary>Answer</summary>d. VM1, VM2, VM3, & VM4<br/><br/>When automatic provisioning is enabled, Security Center provisions the Microsoft Monitoring Agent on all supported Azure VMs & any new ones that are created<br/>Supported OS, include : Ubuntu 14.04 LTS (x86/x64), 16.04 LTS (x86/x64), & 18.04 LTS (x64) & Windows Server 2008 R2, 2012, 2012 R2, 2016, version 1709 & 1803<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/defender-for-cloud/faq-general</details>|
|13|Simulation -<br/>You need to email an alert to a suer named admin1@contoso.com if the average CPU usage of a virtual mahcine named VM1 is grater than 70 percent for a period of 15 minutes<br/>To complete this task, sign in to the Azure portal|<details><summary>Answer</summary>newAlertRule - condition<br/><img src="https://i.imgur.com/fDPDNyp.png"><br/>Actions - actionGroup - send email to specific user - admin1@contoso.com<br/><img src="https://i.imgur.com/1g9NODo.png"><br/>ref:<br/>https://learn.microsoft.com/en-us/azure/azure-sql/database/alerts-insights-configure-portal?view=azuresql</details>|
|14|Simulation -<br/>You need to collect all the audit failure data from the security log of a virtual machine named VM1 to an Azure Storage account<br/>To complete this task, sign in to the Azure portal<br/>This task might take several minutes to complete You can perform other tasks while the task complete|<details><summary>Answer</summary><img src="https://i.imgur.com/VR4XU4A.png"></details>|
|15|You have 10 virtual machines on a single subnet that has a single single NSG<br/>You need to log the network traffic to an Azure Storage account<br/>What should you do?<br/><br/>a. Install the Network Performance Monitor solution<br/>b. Create an Azure Log Analytics workspace<br/>c. Enable diagnostic logging for the NSG<br/>d. Enable NSG flow logs|<details><summary>Answer</summary>d. Enable NSG flow logs<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/network-watcher/nsg-flow-logs-tutorial#create-an-nsg-flow-log</details>|
|16|You have an Azure subscription that contains the virtual machines shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>OS&nbsp;</td> </tr> <tr> <td>VM1&nbsp;</td> <td>Windows Server 2016&nbsp;</td> </tr> <tr> <td>VM2&nbsp;</td> <td>Ubuntu Server 18.04 LTS&nbsp;</td> </tr> </tbody> </table><br/>From Azure Security Center, you turn on Auto Provisioning<br/>You deploy the virtual machines shown in the following table<br/><table> <tbody> <tr> <td>Name</td> <td>OS&nbsp;</td> </tr> <tr> <td>VM3&nbsp;</td> <td>Windows Server 2016&nbsp;</td> </tr> <tr> <td>VM4&nbsp;</td> <td>Ubuntu Server 18.04 LTS&nbsp;</td> </tr> </tbody> </table><br/>On which virtual machines is the Log Analytics Agent installed?<br/><br/>a. VM3 only<br/>b. VM1 & VM3 only<br/>c. VM3 & VM4 only<br/>d. VM1, VM2, VM3, & VM4|<details><summary>Answer</summary>d. VM1, VM2, VM3, & VM4<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/defender-for-cloud/monitoring-components</details>|
|17|You plan to use Azure Log Analytics to collect logs from 200 server that run Windows Server 2016<br/>You need to automate the deployment of the Microsoft Monitoring Agent to all the servers by using an ARM template<br/>How should you complete the template? To answer, select the appropriate options in the answer are<br/>Note : Each correct selection is worth one point<br/>`{`<br/>`	"type": "Microsoft.Compute/virtualMachines/extensions",`<br/>`	"name": "[concat(parameter('vmname'), /OMSExtension]",`<br/>`	"apiVersion": "[variables('apiVersion')]",`<br/>`	"location": [`<br/>`		"[concat('Microsoft.Compute/virtualMachines/', parameters('vmName'))]" `<br/>`	],`<br/>`	"properties": {`<br/>`		"publisher": "Microsoft.EnterpriseCloud.Monitoring",`<br/>`		"type": "MicrosoftMonitoringAgent",`<br/>`		"typeHandlerVersion": "1.0",`<br/>`		"autoUpgradeMinorVersion": true,`<br/>`		"settings": {`<br/>`			"AzureADApplicationID, or WorkspaceID, or WorkspaceName, or WorkspaceURL": "[variable ('var1')]"`<br/>`		},`<br/>`		"protectedSettings": {`<br/>`			"AzureADApplicationSecret, or StorageAccountKey, or WorkspaceID, or WorkspaceKey": "[variable ('var2')]"`<br/>`		}`<br/>`	}`<br/>`}`|<details><summary>Answer</summary>Box 1 - WorkspaceID<br/><br/>Box 2 - WorkspaceKey<br/><br/>In Azure portal<br/>On the Overview, Settings Dashboard page, click Connected Sources, & then copy & paste the Workspace ID & Workspace Key (Primary Key) from the log analytics portal<br/>ref:<br/>https://learn.microsoft.com/ru-ru/archive/blogs/manageabilityguys/enabling-the-microsoft-monitoring-agent-in-windows-json-templates</details>|
|18|You have Azure subscription that contains the alerts shown in the following exhibit<br/><img src="https://i.imgur.com/wISRXBO.png"><br/>Use the drop-down menus to select the answer choice that completes each statement based on the information presented in the graphci<br/>Note : Each correct selection is worth one point<br/><table> <tbody> <tr> <td>The state of Alert1 that was fired at 11:23:52&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>can't be changed&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>can be changed to Closed only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>can be changed to New only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>can be changed to New or Closed&nbsp;</td> </tr> </tbody> </table><br/><table> <tbody> <tr> <td>The state of Alert2 that was fired at 11:23:24&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>can't be changed&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>can be changed to Acknowledged only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>can be changed to New only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>can be changed to New or Acknowledged&nbsp;</td> </tr> </tbody> </table>|<details><summary>Answer</summary>Box 1 - can be changed to Closed only<br/>Box 2 - can be changed to New or Acknowledged<br/>ref:<br/>https://learn.microsoft.com/en-us/azure/azure-monitor/alerts/alerts-overview</details>|
|19|You have an Azure subscription named Sub1 that is associated to an AAD tenant named contoso.com<br/>You are assigned the Global administrator role for the tenant. You are responsible for managing Azure Security Center settings<br/>You need to create a custom sensitivity label<br/><br/>What should you do?<br/><br/>a. Create a custom sensitive information type<br/>b. Elevate access for global administrators in AAD<br/>c. UKpgrade the pricing tier of the Security Center to Standard<br/>d. Enable integration with Microsoft Cloud App Security|<details><summary>Answer</summary>a. Create a custom sensitive information type<br/><br/>First, you need to create a new sensitive information type because you can't directly modify the default rules<br/>ref:<br/>https://learn.microsoft.com/en-us/purview/customize-a-built-in-sensitive-information-type</details>|
|20|You have the hierarchy of Azure resources shown in the following exhibit<br/><img src="https://i.imgur.com/g8DNVrs.png"><br/>you create the Azure Blueprints definitions shown in the following table<br/><table> <tbody> <tr> <td>Name&nbsp;</td> <td>Published at&nbsp;</td> </tr> <tr> <td>Blueprint1&nbsp;</td> <td>Tenant Root Group&nbsp;</td> </tr> <tr> <td>Blueprint2&nbsp;</td> <td>Subscription1&nbsp;</td> </tr> </tbody> </table><br/>To which objects can you assign Blueprint1 & Blueprint2? To answer, select the appropriate options in the answer area<br/>Note : Each correct selection is worth one point<br/>**Answer Area**<br/><table> <tbody> <tr> <td>Blueprint1 :&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>ManagementGroup1 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>ManagementGroup1, Subscription1, &amp; RG1 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>ManagementGroup1, Subscription1, RG1, &amp; VM1&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Subscription1 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Tenant Root Group only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Tenant Root Group,&nbsp;ManagementGroup1, &amp; Subscription1 only&nbsp;</td> </tr> </tbody> </table><br/><table> <tbody> <tr> <td>Blueprint2 :&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>ManagementGroup1 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Subscription1 &amp; RG1 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Subscription1 only&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>Subscription1, RG1, &amp; VM1&nbsp;</td> </tr> </tbody> </table>|<details><summary>Answer</summary>Box 1 - Tenant Root Group, ManagementGroup1, & Subscription1 only<br/>Blueprint definitions published at the Tenant Root Group can be assigned to any management group, subscription, or resource group within the tenant.<br/><br/>Box 2 - Subscription1<br/><br/>ref:<br/>https://learn.microsoft.com/en-us/azure/governance/blueprints/overview#blueprint-assignment</details>|

---

## Scores
|n|date|result|
|-|----|------|
|1|13jan2024 PM|17/20 = 85%|
